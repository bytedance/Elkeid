(window.webpackJsonp=window.webpackJsonp||[]).push([[134,195,293,355,373],{1317:function(e,t,n){e.exports={"legend-out-box":"legend-out-box-318bca6ead","legend-box":"legend-box-9441c4e5ea",circle:"circle-8b4ede8177",label:"label-4e062dae22",count:"count-3ecd325c9a"}},1418:function(e,t,n){e.exports={container:"container-f78b11030f","overview-box":"overview-box-318e426763","count-box":"count-box-009129dc30","chart-box":"chart-box-7974fffc42"}},1617:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"r",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return o})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"o",(function(){return N})),n.d(t,"q",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return g})),n.d(t,"p",(function(){return _})),n.d(t,"k",(function(){return O})),n.d(t,"n",(function(){return j}));var r,a=n(54),c=n(12);!function(e){e.detecting="running",e.finished="finished",e.error="error"}(r||(r={}));var i,u=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupStatistics",params:t},Object(c.g)("获取策略组统计信息"))},l=function(){return Object(a.b)({method:"get",url:"/api/v6/baseline/GetGroupList"},Object(c.g)("获取策略组列表"))};!function(e){e.success="success",e.failure="failed"}(i||(i={}));var o,s=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/Detect",data:t},Object(c.g)("开始基线检查"),!1)},d=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupCheckStatus",params:t},Object(c.g)("策略组检测状态"))},m=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/DetectProgressDetail",data:t},Object(c.g)("基线检查进度详情"))};!function(e){e.All="",e.HasRisk="risk",e.NoRisk="unrisk"}(o||(o={}));var b,f=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineList",data:t,params:n},Object(c.g)("获取基线列表"))},v=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineDetailList",data:t,params:n},Object(c.g)("基线详情列表"))};!function(e){e.Fail="error",e.NoPass="failed",e.Pass="passed"}(b||(b={}));var p,N=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetCheckResList",data:t,params:n},Object(c.g)("检查结果列表"))},h=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetWhiteHostNum",data:t},Object(c.g)("获取白名单弹框主机数"))};!function(e){e[e.Part=0]="Part",e[e.All=1]="All"}(p||(p={}));var g=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/ChecklistWhiten",data:t},Object(c.g)("检查项加白"))},_=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetChecklistDetail",data:t},Object(c.g)("获取一个检查项详情"))};function O(e,t){return Object(a.b)({url:"/api/v6/baseline/GetBaselineCheckList",params:e,data:t,method:"POST"},Object(c.g)("获取基线对应检查项列表"))}function j(e,t){return Object(a.b)({url:"/api/v6/baseline/GetCheckHostList",params:e,data:t,method:"POST"},Object(c.g)("获取检查项影响主机列表"))}},1636:function(e,t,n){"use strict";function r(e){if(e>=1e3&&e<1e4){var t=(e/1e3).toFixed(1);return-1!==t.indexOf(".0")&&(t=t.slice(0,t.length-2)),"".concat(t,"k")}if(e>=1e4){var n=(e/1e4).toFixed(1);return-1!==n.indexOf(".0")&&(n=n.slice(0,n.length-2)),"".concat(n,"w")}return"".concat(e)}n.d(t,"a",(function(){return r}))},316:function(e,t,n){"use strict";n.r(t);var r=n(50),a=n.n(r),c=n(0),i=n.n(c),u=n(799),l=n(794),o=n(115),s=n.n(o),d=n(1315),m=n(196),b=n(1636),f=n(1317),v=n.n(f),p="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/alarm-list/alarm-list-comm/alarm-overview/alarm-vuln-piechart/index.tsx",N=s.a.bind(v.a),h=function(e){var t=e.label,n=e.color,r=e.count;return i.a.createElement("div",{className:N("legend-box"),__source:{fileName:p,lineNumber:25,columnNumber:5}},i.a.createElement("div",{className:N("circle"),style:{background:n},__source:{fileName:p,lineNumber:26,columnNumber:7}}),i.a.createElement("div",{className:N("label"),__source:{fileName:p,lineNumber:27,columnNumber:7}},i.a.createElement(u.a,{__source:{fileName:p,lineNumber:28,columnNumber:9}},t)),i.a.createElement("div",{className:N("count"),__source:{fileName:p,lineNumber:30,columnNumber:7}},i.a.createElement(m.c,{__source:{fileName:p,lineNumber:31,columnNumber:9}},r)))};t.default=function(e){var t=e.value,n=Object(c.useState)({}),r=a()(n,2),u=r[0],o=(r[1],Object(c.useRef)(null)),s=null==t?void 0:t.map((function(e){return null==e?void 0:e.color})),m=Object(c.useMemo)((function(){var e=0;return null==t||t.forEach((function(t){var n;e+=null!==(n=null==t?void 0:t.count)&&void 0!==n?n:0})),e}),[t]),f=Object(c.useMemo)((function(){var e="<table><th><td></td><td></td><th>";return null==t||t.forEach((function(t){e+="\n      <tr>\n        <td>\n          <div style='display: inline-block;width: 10px;height: 10px; border-radius: 50%;background: ".concat(null==t?void 0:t.color,";margin-right: 5px;'></div>\n          <div style='display: inline-block;'>").concat(null==t?void 0:t.label,"</div>\n        </td>\n        <td>\n          <div style='margin-left: 5px;text-align: right;'>").concat(((null==t?void 0:t.count)/(m||1)*100).toFixed(2),"%</div>\n        </td>\n      </tr>")})),e+="</table>"}),[t]);return Object(c.useEffect)((function(){var e,n,r,a;null!=o&&o.current&&t&&(null==o||null===(e=o.current)||void 0===e||null===(n=e.getEchartsInstance())||void 0===n||n.clear(),null==o||null===(r=o.current)||void 0===r||null===(a=r.getEchartsInstance())||void 0===a||a.setOption({tooltip:{trigger:"item",textStyle:{color:"#fff"},appendToBody:!0,backgroundColor:"#1d2129",formatter:function(){return"<div>".concat(f,"</div>")}},color:m?s:new Array(null==t?void 0:t.length).fill("#F2F3F8"),series:[{type:"pie",radius:[20,24],label:{show:!1},emphasis:{scale:!1},labelLine:{show:!1},data:null==t?void 0:t.map((function(e){return{value:e.count,name:e.label,itemStyle:{borderColor:"#fff",borderWidth:1}}}))}]}))}),[Object(l.a)(t)]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{ref:o,option:u,style:{height:48,width:48,flexShrink:0},__source:{fileName:p,lineNumber:117,columnNumber:7}}),i.a.createElement("div",{className:N("legend-out-box"),__source:{fileName:p,lineNumber:118,columnNumber:7}},null==t?void 0:t.map((function(e){return i.a.createElement(h,{label:e.label,color:e.color,count:Object(b.a)(e.count),key:e.label,__source:{fileName:p,lineNumber:120,columnNumber:11}})}))))}},420:function(e,t,n){"use strict";n.r(t);var r=n(28),a=n.n(r),c=n(50),i=n.n(c),u=n(1331),l=n.n(u),o=n(16),s=n.n(o),d=n(0),m=n.n(d),b=n(1292),f=n(794),v=n(115),p=n.n(v),N=n(316),h=n(596),g=n(1617),_=n(12),O=n(1418),j=n.n(O),x=n(811),E="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/baseline-detect/baseline-detail-page/detect-overview/index.tsx",D=p.a.bind(j.a);t.default=function(e){l()(e);var t=Object(d.useContext)(x.BaselineDetectDetailCtx),n=t.baselineId,r=t.policyGroupId,c=t.refreshFn,u=t.baselineType,o=Object(d.useState)(void 0),v=i()(o,2),p=v[0],O=v[1],j=Object(b.a)(a()(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.e)({params:{group_id:r,baseline_id:n}});case 2:return t=e.sent,a=t.data,O(Object(x.isDetectingStatus)(a.status)?1e4:void 0),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),{auto:!0,pollingInterval:p}),k=j.data,y=j.refresh;c.detectOverview=y;var w=m.a.useMemo((function(){return m.a.createElement(N.default,{value:[{count:null==k?void 0:k.risk_host_num,color:"#EB635E",label:Object(_.g)("kube"===u?"未通过集群":"未通过主机")},{count:null==k?void 0:k.pass_host_num,color:"#E5E8EF",label:Object(_.g)("kube"===u?"通过集群":"通过主机")}],__source:{fileName:E,lineNumber:35,columnNumber:7}})}),[Object(f.a)(k)]),S=m.a.useMemo((function(){return m.a.createElement(N.default,{value:[{count:null==k?void 0:k.risk_num,color:"#4086FF",label:Object(_.g)("风险项")},{count:null==k?void 0:k.pass_num,color:"#E5E8EF",label:Object(_.g)("通过项")}],__source:{fileName:E,lineNumber:54,columnNumber:7}})}),[Object(f.a)(k)]);return m.a.createElement(h.a,{title:Object(_.g)("告警概览"),__source:{fileName:E,lineNumber:72,columnNumber:5}},m.a.createElement("div",{className:D("container"),__source:{fileName:E,lineNumber:73,columnNumber:7}},m.a.createElement("div",{className:D("overview-box"),__source:{fileName:E,lineNumber:74,columnNumber:9}},m.a.createElement("div",{className:D("count-box"),__source:{fileName:E,lineNumber:75,columnNumber:11}},m.a.createElement("div",{__source:{fileName:E,lineNumber:76,columnNumber:13}},Object(_.g)("最近检查通过率")),void 0!==(null==k?void 0:k.pass_rate)?m.a.createElement(m.a.Fragment,null,null==k?void 0:k.pass_rate,m.a.createElement("small",{__source:{fileName:E,lineNumber:80,columnNumber:17}},"%")):"-")),m.a.createElement("div",{className:D("overview-box"),__source:{fileName:E,lineNumber:87,columnNumber:9}},m.a.createElement("div",{className:D("count-box"),__source:{fileName:E,lineNumber:88,columnNumber:11}},m.a.createElement("div",{__source:{fileName:E,lineNumber:89,columnNumber:13}},Object(_.g)("kube"===u?"检查集群数":"检查主机数")),void 0!==(null==k?void 0:k.host_num)?null==k?void 0:k.host_num:"-"),m.a.createElement("div",{className:D("chart-box"),__source:{fileName:E,lineNumber:95,columnNumber:11}},w)),m.a.createElement("div",{className:D("overview-box"),__source:{fileName:E,lineNumber:97,columnNumber:9}},m.a.createElement("div",{className:D("count-box"),__source:{fileName:E,lineNumber:98,columnNumber:11}},m.a.createElement("div",{__source:{fileName:E,lineNumber:99,columnNumber:13}},Object(_.g)("检查项")),void 0!==(null==k?void 0:k.checklist_num)?null==k?void 0:k.checklist_num:"-"),m.a.createElement("div",{className:D("chart-box"),__source:{fileName:E,lineNumber:104,columnNumber:11}},S))))}},811:function(e,t,n){"use strict";n.r(t),n.d(t,"BaselineDetectCtx",(function(){return u})),n.d(t,"BaselineDetectDetailCtx",(function(){return l})),n.d(t,"useDetectingTransferFinish",(function(){return o})),n.d(t,"isDetectingStatus",(function(){return s})),n.d(t,"isFinishDetectStatus",(function(){return d})),n.d(t,"isTransferDetectFinish",(function(){return m})),n.d(t,"POLLING_INTERVAL_TIME",(function(){return b}));var r=n(0),a=n.n(r),c=n(163),i=n(1617),u=a.a.createContext({policyGroupId:0,policyDetectStatus:i.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1,baselineType:void 0}),l=a.a.createContext({policyGroupId:0,policyDetectStatus:i.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1,instanceId:void 0,baselineId:void 0,baselineType:void 0});function o(){var e=Object(r.useRef)();return{isTransferDetectStatus:function(t){var n,r=t.detectStatus,a=t.policyGroupId,i=null!==(n=e.current)&&void 0!==n?n:{},u=i.detectStatus,l=i.policyGroupId,o=m(r,u)&&Object(c.eq)(l,a);return e.current=t,o},preData:e}}function s(e){return e===i.b.detecting}function d(e){return e===i.b.finished}function m(e,t){return e===i.b.finished&&t===i.b.detecting}var b=1e4}}]);