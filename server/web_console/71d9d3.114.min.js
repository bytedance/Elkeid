(window.webpackJsonp=window.webpackJsonp||[]).push([[114,30,388,487],{1408:function(e,t,n){e.exports={container:"container-eed95b3d52","top-nav-box":"top-nav-box-710c2b6cb6","back-button":"back-button-729406b74e","host-name":"host-name-684f15c748","content-box":"content-box-5528e6b13f",content:"content-f493ad0976","bottom-footer-box":"bottom-footer-box-ddba6e369f",text:"text-229b2ea3d9",number:"number-4146bafed2"}},1430:function(e,t,n){e.exports={header:"header-192f1855ae","detail-card":"detail-card-0e5ebe74a4",card:"card-7cea4ab805",nvabar:"nvabar-1878f7d81a",content:"content-2b68ec440a",label:"label-78acfb833b",value:"value-ba1eb174ef",tip:"tip-8aae57b6c5"}},1615:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(115),c=n.n(l),u=n(1623),i=n.n(u),o="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/common/status-display-component/index.tsx",s=c.a.bind(i.a);t.a=function(e){var t=e.color,n=e.content;return r.a.createElement("div",{className:s("container"),__source:{fileName:o,lineNumber:15,columnNumber:5}},r.a.createElement("div",{className:s("circle"),style:{background:t},__source:{fileName:o,lineNumber:16,columnNumber:7}}),r.a.createElement("div",{className:s("content"),__source:{fileName:o,lineNumber:17,columnNumber:7}},n))}},1623:function(e,t,n){e.exports={container:"container-5be80ecb83",content:"content-c7c988a72c",circle:"circle-f32e1ad32c"}},1626:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return N})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return j})),n.d(t,"g",(function(){return k})),n.d(t,"j",(function(){return h}));var a,r,l=n(10),c=n.n(l),u=n(54),i=n(12);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.scan_quick="scan_quick",e.scan_full="scan_full",e.scan_file="scan_file"}(r||(r={}));var m=(a={},c()(a,r.scan_quick,Object(i.g)("快速扫描")),c()(a,r.scan_full,Object(i.g)("全盘扫描")),c()(a,r.scan_file,Object(i.g)("端上目录/文件扫描")),a),b=[{label:m[r.scan_file],text:m[r.scan_file],value:r.scan_file},{label:m[r.scan_full],text:m[r.scan_full],value:r.scan_full},{label:m[r.scan_quick],text:m[r.scan_quick],value:r.scan_quick}],d=[{label:Object(i.g)("文件路径"),value:"static_file"},{label:Object(i.g)("文件MD5"),value:"md5_hash"}];function f(e,t){return Object(u.b)({url:"/api/v6/virus/task/hosts",params:e,data:t,method:"POST"},Object(i.g)("获取任务的主机列表"))}function p(e,t){return Object(u.b)({url:"/api/v6/virus/task/list",params:e,data:t,method:"POST"},Object(i.g)("获取任务列表"))}function N(e,t){return Object(u.b)({url:"/api/v6/virus/alarm/list",params:e,data:t,method:"POST"},Object(i.g)("获取告警列表"))}function _(e){return Object(u.b)({url:"/api/v6/virus/alarm/statistics",params:e,method:"GET"},Object(i.g)("获取告警统计数据"))}function v(e){return Object(u.b)({url:"/api/v6/virus/task/statistics",params:e,method:"GET"},Object(i.g)("获取任务统计数据"))}function O(e){var t=e.data;return Object(u.b)({url:"/api/v6/virus/alarm/update",data:t,method:"POST"},Object(i.g)("更新告警处理状态"))}function g(e){return Object(u.b)({url:"/api/v6/virus/whitelist/increase",data:e,method:"POST"},Object(i.g)("新增白名单"))}function j(e){return Object(u.b)(s(s({url:"/api/v6/virus/whitelist/listing"},e),{},{method:"POST"}),Object(i.g)("获取白名单列表"))}function k(e){var t=e.data;return Object(u.b)({url:"/api/v6/virus/whitelist/del",data:t,method:"POST"},Object(i.g)("删除白名单"))}function h(e){return Object(u.b)({url:"/api/v6/virus/whitelist/update",data:e,method:"POST"},Object(i.g)("修改病毒查杀白名单规则名字和注释"))}},1677:function(e,t,n){"use strict";var a,r=n(0),l=n.n(r);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}t.a=function(e){return l.a.createElement("svg",c({width:12,height:12,fill:"none"},e),a||(a=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.934 7.96a.5.5 0 01-.708 0l-2.18-2.18L3.93 7.899a.5.5 0 01-.707 0l-.354-.353a.5.5 0 010-.707l2.829-2.829a.5.5 0 01.707 0l.353.354a.505.505 0 01.048.055L9.287 6.9a.5.5 0 010 .707l-.353.354z",fill:"#4E5969"})))}},378:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskType",(function(){return A}));n(1296);var a=n(1297),r=(n(116),n(42)),l=(n(224),n(97)),c=n(50),u=n.n(c),i=n(28),o=n.n(i),s=n(10),m=n.n(s),b=n(16),d=n.n(b),f=n(0),p=n.n(f),N=n(55),_=n(1607),v=n(794),O=n(1292),g=n(115),j=n.n(g),k=n(423),h=n(406),E=n(1696),y=n(1626),x=n(12),S=n(1677),T=n(1408),w=n.n(T),F="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/create-task/index.tsx";function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A,D=j.a.bind(w.a);!function(e){e.virus="virus",e.agent="agent"}(A||(A={}));t.default=function(){var e=Object(_.a)({task_name:void 0,action:E.TaskTypeEunm.RebootAgent,id_list:[],tags:[],idc:[],platform:[],status:[],hostname:void 0,ip:void 0,agent_id:void 0,version:void 0,isSelectedAllFromFilter:!1,current:1,pageSize:10,step:1,task_type:"agent",cpu_idle:void 0,timeout:void 0}),t=e.value,n=e.setValue,c=Object(f.useMemo)((function(){return C(C({},t),{},{isSelectedAllFromFilter:"boolean"==typeof t.isSelectedAllFromFilter&&t.isSelectedAllFromFilter||"true"===t.isSelectedAllFromFilter,step:Number(t.step)})}),[Object(v.a)(t)]),i=Object(f.useMemo)((function(){return{step:c.step,setStep:function(e){return n((function(t){return C(C({},t),{},{step:e})}))}}}),[c.step]),s=i.step,m=i.setStep,b=Object(f.useMemo)((function(){return c.isSelectedAllFromFilter?{conditions:{tags:c.tags,idc:c.idc,platform:c.platform,status:c.status,hostname:c.hostname,version:c.version,ip:c.ip,agent_id:c.agent_id}}:{id_list:c.id_list}}),[c]),g=Object(O.a)(o()(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.GetTaskHostStatus)({data:b});case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)}))),{auto:!0,ready:1===s,refreshDeps:[b]}).data,j=Object(f.useMemo)((function(){var e;return null!=c&&c.isSelectedAllFromFilter||null!=c&&null!==(e=c.id_list)&&void 0!==e&&e.length?{allTaskHostNum:(null==g?void 0:g.all_num)||0,errorTaskHostNum:(null==g?void 0:g.error_num)||0}:{allTaskHostNum:0,errorTaskHostNum:0}}),[g,c]),T=j.allTaskHostNum,w=j.errorTaskHostNum,P=Object(N.g)(),I=Object(f.useRef)(null),q=Object(f.useRef)(null),z=Object(f.useState)(!1),R=u()(z,2),H=R[0],V=R[1],L=function(){var e=o()(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==s){e.next=15;break}return e.prev=1,e.next=4,I.current.checkIsSelectedAllFromFilter();case 4:if(T-w){e.next=7;break}return l.a.error(Object(x.g)("当前没有可正常下发任务的主机资产")),e.abrupt("return");case 7:m(2),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),l.a.error(Object(x.g)("请选择主机资产"));case 13:e.next=35;break;case 15:return e.prev=15,e.next=18,q.current.handleCheckFormValid();case 18:e.next=23;break;case 20:return e.prev=20,e.t1=e.catch(15),e.abrupt("return");case 23:if(V(!0),c.task_type!==A.agent){e.next=31;break}return t=c.action===E.TaskTypeEunm.RebootAgent?E.CreateRebootAgentTask:E.CreateSyncConfigTask,e.next=28,t({data:C({task_name:c.task_name,action:c.action},b)});case 28:P.push("/task-list"),e.next=34;break;case 31:return e.next=33,Object(E.CreateVirusTask)(C(C({task_name:c.task_name,action:c.action,file_path:c.action===y.k.scan_file?c.file_path:void 0},b),c.action===y.k.scan_full||c.action===y.k.scan_quick?{cpu_idle:String(null==c?void 0:c.cpu_idle),timeout:String(null==c?void 0:c.timeout)}:{}));case 33:P.push("/virus-alarm-list?_vao_taskListVisible=true");case 34:V(!1);case 35:case"end":return e.stop()}}),e,null,[[1,10],[15,20]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement("div",{className:D("container"),__source:{fileName:F,lineNumber:200,columnNumber:5}},p.a.createElement("div",{className:D("top-nav-box"),__source:{fileName:F,lineNumber:201,columnNumber:7}},p.a.createElement(r.a,{className:D("back-button"),onClick:function(){P.goBack()},__source:{fileName:F,lineNumber:202,columnNumber:9}},p.a.createElement(S.a,{style:{transform:"rotate(-90deg)"},__source:{fileName:F,lineNumber:208,columnNumber:11}})),p.a.createElement("span",{className:D("host-name"),__source:{fileName:F,lineNumber:210,columnNumber:9}},Object(x.g)("新建任务"))),p.a.createElement("div",{className:D("content-box"),__source:{fileName:F,lineNumber:213,columnNumber:7}},p.a.createElement(a.a,{current:s,style:{width:340,margin:"0 auto",padding:"20px 0"},__source:{fileName:F,lineNumber:214,columnNumber:9}},p.a.createElement(a.a.Step,{title:Object(x.g)("选择主机"),__source:{fileName:F,lineNumber:215,columnNumber:11}}),p.a.createElement(a.a.Step,{title:Object(x.g)("设置任务信息"),__source:{fileName:F,lineNumber:216,columnNumber:11}})),p.a.createElement("div",{className:D("content"),__source:{fileName:F,lineNumber:219,columnNumber:9}},1===s?p.a.createElement(k.default,{ref:I,visible:1===s,filter:c,setFilter:n,__source:{fileName:F,lineNumber:221,columnNumber:13}}):p.a.createElement(h.default,{ref:q,visible:2===s,filter:c,setFilter:n,__source:{fileName:F,lineNumber:228,columnNumber:13}}))),p.a.createElement("div",{className:D("bottom-footer-box"),__source:{fileName:F,lineNumber:238,columnNumber:7}},p.a.createElement("div",{className:D("text"),__source:{fileName:F,lineNumber:239,columnNumber:9}},c.isSelectedAllFromFilter||w?p.a.createElement("div",{__source:{fileName:F,lineNumber:241,columnNumber:13}},Object(x.g)("当前选择"),p.a.createElement("span",{className:D("number"),__source:{fileName:F,lineNumber:243,columnNumber:15}}," ",T," "),Object(x.g)("台主机，其中"),p.a.createElement("span",{className:D("number"),__source:{fileName:F,lineNumber:245,columnNumber:15}}," ",w," "),Object(x.g)("台主机无法正常下发任务、将被自动忽略")):null),p.a.createElement("div",{__source:{fileName:F,lineNumber:250,columnNumber:9}},p.a.createElement(r.a,{style:{marginRight:12},onClick:function(){1===s?P.goBack():m(1)},__source:{fileName:F,lineNumber:251,columnNumber:11}},1===s?Object(x.g)("取消"):Object(x.g)("上一步")),p.a.createElement(r.a,{type:"primary",onClick:L,loading:H,__source:{fileName:F,lineNumber:254,columnNumber:11}},1===s?Object(x.g)("下一步"):Object(x.g)("确定")))))}},406:function(e,t,n){"use strict";n.r(t);n(804);var a,r=n(598),l=n(28),c=n.n(l),u=n(10),i=n.n(u),o=n(50),s=n.n(o),m=(n(225),n(127)),b=(n(197),n(117)),d=n(1),f=n.n(d),p=(n(807),n(605)),N=(n(806),n(199)),_=n(603),v=n.n(_),O=n(16),g=n.n(O),j=n(0),k=n.n(j),h=n(604),E=n(838),y=n(1626),x=n(12),S=n(378),T="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/create-task/task-setting/index.tsx";function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(h.a)(N.a)(a||(a=v()(["\n  padding: 20px;\n\n  .arco-form-label-item {\n    flex: unset;\n  }\n  .arco-form-item-wrapper {\n    flex: unset;\n  }\n"]))),C=function(e){switch(e){case"scan_full":return k.a.createElement(p.a,{type:"warning",style:{marginTop:16},content:Object(x.g)("全盘扫描端上资源占用较高，且时间较长，请在非业务高峰期操作。"),__source:{fileName:T,lineNumber:32,columnNumber:9}});default:return null}},A=function(e){return k.a.createElement(m.a,{__source:{fileName:T,lineNumber:44,columnNumber:3}},Object(x.g)("最大占用空闲CPU的"),k.a.createElement(b.a,f()({style:{width:55}},e,{__source:{fileName:T,lineNumber:46,columnNumber:5}})),"%")},D=function(e){return k.a.createElement(m.a,{__source:{fileName:T,lineNumber:51,columnNumber:3}},Object(x.g)("扫描时间超过"),k.a.createElement(b.a,f()({style:{width:55}},e,{__source:{fileName:T,lineNumber:53,columnNumber:5}})),Object(x.g)("小时，结束扫描"))},I=Object(j.forwardRef)((function(e,t){var n=e.visible,a=e.filter,l=e.setFilter,u="virus"===(null==a?void 0:a.task_type)?y.m:E.taskTypeOptions,i=N.a.useForm(),o=s()(i,1)[0];return Object(j.useEffect)((function(){!["scan_full","scan_quick"].includes(null==a?void 0:a.action)||null!=a&&a.cpu_idle&&null!=a&&a.timeout||l((function(e){return F(F({},e),{},{cpu_idle:e.cpu_idle||30,timeout:e.timeout||48})}))}),[a]),Object(j.useEffect)((function(){n&&o.setFieldsValue(a)}),[n,a]),Object(j.useImperativeHandle)(t,(function(){return{handleCheckFormValid:(e=c()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validate();case 2:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e})),k.a.createElement(P,{form:o,colon:!1,labelCol:{style:{width:120}},wrapperCol:{style:{width:"calc(100% - 120px)"}},labelAlign:"right",onChange:function(e,t){if(null!=e&&e.action)return l((function(e){return F(F(F({},e),t),{},{module_id:void 0})})),void o.setFieldValue("module_id",void 0);l((function(e){return F(F({},e),t)}))},__source:{fileName:T,lineNumber:83,columnNumber:5}},k.a.createElement(N.a.Item,{field:"task_name",label:Object(x.g)("任务名称"),rules:[{required:!0,message:Object(x.g)("请输入任务名称")}],__source:{fileName:T,lineNumber:106,columnNumber:7}},k.a.createElement(b.a,{style:{width:"300px"},placeholder:Object(x.g)("请输入任务名称"),__source:{fileName:T,lineNumber:116,columnNumber:9}})),k.a.createElement(N.a.Item,{field:"action",label:Object(x.g)("任务类型"),rules:[{required:!0,message:Object(x.g)("请选择任务类型")}],extra:C(null==a?void 0:a.action),__source:{fileName:T,lineNumber:118,columnNumber:7}},k.a.createElement(r.a.Group,{type:"button",name:"lang",options:u,__source:{fileName:T,lineNumber:129,columnNumber:9}})),a.task_type===S.TaskType.virus&&k.a.createElement(N.a.Item,{shouldUpdate:!0,noStyle:!0,__source:{fileName:T,lineNumber:132,columnNumber:9}},(function(){switch(null==a?void 0:a.action){case y.k.scan_file:return k.a.createElement(N.a.Item,{field:"file_path",label:Object(x.g)("绝对路径"),rules:[{required:!0,message:Object(x.g)("请输入绝对路径")}],__source:{fileName:T,lineNumber:137,columnNumber:19}},k.a.createElement(b.a,{placeholder:Object(x.g)("请输入绝对路径"),__source:{fileName:T,lineNumber:147,columnNumber:21}}));case y.k.scan_quick:case y.k.scan_full:return k.a.createElement(k.a.Fragment,null,k.a.createElement(N.a.Item,{field:"cpu_idle",label:Object(x.g)("资源占用上限"),rules:[{required:!0,message:Object(x.g)("请输入资源占用上限")},{type:"number",min:0,max:100,message:Object(x.g)("请输入0-100的数字")}],normalize:function(e){return e>100?100:e},__source:{fileName:T,lineNumber:155,columnNumber:21}},k.a.createElement(A,{__source:{fileName:T,lineNumber:172,columnNumber:23}})),k.a.createElement(N.a.Item,{field:"timeout",label:Object(x.g)("任务超时时长"),rules:[{required:!0,message:Object(x.g)("请输入任务超时时长")},{type:"number",min:1,max:168,message:Object(x.g)("请输入1-168的数字")}],normalize:function(e){return e>168?168:e},__source:{fileName:T,lineNumber:174,columnNumber:21}},k.a.createElement(D,{__source:{fileName:T,lineNumber:191,columnNumber:23}})));default:return null}})))}));t.default=I},436:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=(n(197),n(117)),c=n(201),u=(n(162),n(67)),i=n(28),o=n.n(i),s=n(50),m=n.n(s),b=(n(225),n(127)),d=(n(809),n(607)),f=n(16),p=n.n(f),N=n(0),_=n.n(N),v=n(55),O=n(599),g=n(115),j=n.n(g),k=n(378),h=n(838),E=n(1609),y=n(596),x=n(1615),S=n(1628),T=n(594),w=n(1696),F=n(1608),P=n(12),C=n(1430),A=n.n(C),D="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/task-detail/task-detail/index.tsx",I=j.a.bind(A.a),q=function(e){var t=e.color,n=e.value,a=e.label,r=e.data,l=h.taskStatusOptions.find((function(e){return e.value===(null==r?void 0:r.task_status)})),c=Math.ceil(((null==r?void 0:r.sub_task_failed)+(null==r?void 0:r.sub_task_succeed))/(null==r?void 0:r.id_count)*100);return _.a.createElement("div",{className:I("card"),__source:{fileName:D,lineNumber:57,columnNumber:5}},_.a.createElement("div",{className:I("nvabar"),__source:{fileName:D,lineNumber:58,columnNumber:7}},_.a.createElement(d.a,{color:r?null==l?void 0:l.color:t,showText:!1,percent:100,__source:{fileName:D,lineNumber:59,columnNumber:9}})),_.a.createElement("div",{className:I("content"),__source:{fileName:D,lineNumber:61,columnNumber:7}},_.a.createElement("div",{className:I("label"),__source:{fileName:D,lineNumber:62,columnNumber:9}},a),r?_.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},__source:{fileName:D,lineNumber:65,columnNumber:11}},_.a.createElement(b.a,{size:24,__source:{fileName:D,lineNumber:66,columnNumber:13}},_.a.createElement("div",{className:I("value"),__source:{fileName:D,lineNumber:67,columnNumber:15}},"".concat(c,"%")),_.a.createElement(d.a,{width:"140px",color:null==l?void 0:l.color,percent:c,size:"large",showText:!1,__source:{fileName:D,lineNumber:68,columnNumber:15}})),_.a.createElement(x.a,{color:(null==l?void 0:l.color)||"#C9CDD4",content:(null==l?void 0:l.label)||"-",__source:{fileName:D,lineNumber:77,columnNumber:13}})):_.a.createElement("div",{className:I("value"),__source:{fileName:D,lineNumber:80,columnNumber:11}},n)))};t.default=function(e){var t=e.data,n=e.taskType,a=Object(v.g)(),i=Object(N.useState)(void 0),s=m()(i,2),d=s[0],f=s[1],g=Object(O.a)(function(){var e=o()(p.a.mark((function e(a){var r,l,c,u,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.current,l=a.pageSize,e.t0=n,e.next="virus"===e.t0?4:8;break;case 4:return e.next=6,Object(w.PostApiV6VirusTaskSubtaskList)({data:{task_id:null==t?void 0:t.task_id,hostname:d},params:{page:r,page_size:l}});case 6:return u=e.sent,e.abrupt("return",{list:(null==u?void 0:u.data)||[],total:(null==u||null===(c=u.page_info)||void 0===c?void 0:c.total)||0});case 8:return e.next=10,Object(w.GetSubTaskList)({data:{task_id:null==t?void 0:t.task_id,hostname:d},params:{page:r,page_size:l}});case 10:return o=e.sent,e.abrupt("return",{list:(null==o?void 0:o.data)||[],total:(null==o||null===(i=o.page_info)||void 0===i?void 0:i.total)||0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{auto:!0,debounceInterval:300,resetDeps:[d],ready:!(null==t||!t.task_id)}).tableProps,j=[{title:Object(P.g)("主机名称"),dataIndex:"ip",headerCellStyle:{paddingLeft:"4px"},render:function(e,t){return _.a.createElement(T.a,{onClick:function(){a.push("/host-detail?agentId=".concat(null==t?void 0:t.agent_id,"&breadcrumbLinkFrom=").concat(Object(E.b)()))},style:{maxWidth:"168px",textOverflow:"ellipsis"},__source:{fileName:D,lineNumber:148,columnNumber:11}},null==t?void 0:t.hostname)}},{title:Object(P.g)("状态"),dataIndex:"status",render:function(e,t){switch(n){case k.TaskType.virus:var a=h.virusSubTaskStatusOptions.find((function(e){return e.value===(null==t?void 0:t.status)}));return _.a.createElement(b.a,{__source:{fileName:D,lineNumber:174,columnNumber:15}},_.a.createElement(x.a,{color:(null==a?void 0:a.color)||"#C9CDD4",content:(null==a?void 0:a.label)||"-",__source:{fileName:D,lineNumber:175,columnNumber:17}}),t.fail_reason&&_.a.createElement(u.a,{content:t.fail_reason,__source:{fileName:D,lineNumber:180,columnNumber:19}},_.a.createElement("span",{className:I("tip"),__source:{fileName:D,lineNumber:181,columnNumber:21}},Object(P.g)("说明"))));case k.TaskType.agent:default:var r=h.subTaskStatusOptions.find((function(e){return e.value===(null==t?void 0:t.status)}));return _.a.createElement(x.a,{color:(null==r?void 0:r.color)||"#C9CDD4",content:(null==r?void 0:r.label)||"-",__source:{fileName:D,lineNumber:191,columnNumber:15}})}}},{title:Object(P.g)("汇报时间"),dataIndex:"update_time",width:"160px",render:function(e,t){return Object(F.a)(null==t?void 0:t.update_time)}}];return _.a.createElement(y.a,{title:"".concat(Object(P.g)("任务详情（{placeholder1}条）",{placeholder1:null==t?void 0:t.id_count})),containerStyle:{minWidth:1200,margin:"0 auto",minHeight:"calc(100vh - 328px)",maxWidth:"85%"},contentStyle:{marginTop:16},__source:{fileName:D,lineNumber:211,columnNumber:5}},_.a.createElement("div",{className:I("header"),__source:{fileName:D,lineNumber:223,columnNumber:7}},_.a.createElement("div",{className:I("detail-card"),__source:{fileName:D,lineNumber:224,columnNumber:9}},_.a.createElement(q,{data:t,label:Object(P.g)("运行进度"),__source:{fileName:D,lineNumber:225,columnNumber:11}}),_.a.createElement(q,{color:"#00AA2A",label:Object(P.g)("成功数量"),value:null==t?void 0:t.sub_task_succeed,__source:{fileName:D,lineNumber:226,columnNumber:11}}),_.a.createElement(q,{color:"#E63F3F",label:Object(P.g)("失败数量"),value:null==t?void 0:t.sub_task_failed,__source:{fileName:D,lineNumber:227,columnNumber:11}})),_.a.createElement(l.a,{value:d,onChange:f,style:{width:270},placeholder:Object(P.g)("请输入主机名称"),suffix:_.a.createElement(c.a,{__source:{fileName:D,lineNumber:234,columnNumber:19}}),__source:{fileName:D,lineNumber:229,columnNumber:9}})),_.a.createElement("div",{className:I("content"),__source:{fileName:D,lineNumber:238,columnNumber:7}},_.a.createElement(S.a,r()({rowKey:"agent_id"},g,{columns:j,__source:{fileName:D,lineNumber:239,columnNumber:9}}))))}},838:function(e,t,n){"use strict";n.r(t),n.d(t,"selectTypeInputOptions",(function(){return l})),n.d(t,"taskTypeOptions",(function(){return c})),n.d(t,"taskStatusOptions",(function(){return u})),n.d(t,"subTaskStatusOptions",(function(){return i})),n.d(t,"virusSubTaskStatusOptions",(function(){return o}));var a=n(1696),r=n(12),l=[{label:Object(r.g)("任务名称"),value:"task_name"},{label:Object(r.g)("创建人"),value:"task_user"}],c=[{label:Object(r.g)("重启客户端"),text:Object(r.g)("重启客户端"),value:a.TaskTypeEunm.RebootAgent},{label:Object(r.g)("同步配置"),text:Object(r.g)("同步配置"),value:a.TaskTypeEunm.SyncConfig}],u=[{label:Object(r.g)("未运行"),text:Object(r.g)("未运行"),value:a.TaskStatusEunm.created,color:"#C9CDD4"},{label:Object(r.g)("运行中"),text:Object(r.g)("运行中"),value:a.TaskStatusEunm.running,color:"#1664FF"},{label:Object(r.g)("运行成功"),text:Object(r.g)("运行成功"),value:a.TaskStatusEunm.finished,color:"#00AA2A"},{label:Object(r.g)("已停止"),text:Object(r.g)("已停止"),value:a.TaskStatusEunm.cancelled,color:"#E63F3F"}],i=[{label:Object(r.g)("未执行"),text:Object(r.g)("未执行"),value:a.TaskStatusEunm.created,color:"#C9CDD4"},{label:Object(r.g)("执行中"),text:Object(r.g)("执行中"),value:a.SubTaskStatusEnum.running,color:"#1664FF"},{label:Object(r.g)("执行成功"),text:Object(r.g)("执行成功"),value:a.SubTaskStatusEnum.succeed,color:"#00AA2A"},{label:Object(r.g)("执行失败"),text:Object(r.g)("执行失败"),value:a.SubTaskStatusEnum.failed,color:"#E63F3F"}],o=[{label:Object(r.g)("未运行"),text:Object(r.g)("未运行"),value:a.TaskStatusEunm.created,color:"#C9CDD4"},{label:Object(r.g)("运行中"),text:Object(r.g)("运行中"),value:a.SubTaskStatusEnum.running,color:"#1664FF"},{label:Object(r.g)("运行成功"),text:Object(r.g)("运行成功"),value:a.SubTaskStatusEnum.succeed,color:"#00AA2A"},{label:Object(r.g)("运行失败"),text:Object(r.g)("运行失败"),value:a.SubTaskStatusEnum.failed,color:"#E63F3F"}]}}]);