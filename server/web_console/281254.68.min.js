(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{174:function(e,a,r){"use strict";r.r(a);r(307);var t,n=r(74),s=(r(310),r(87)),l=r(41),o=r.n(l),u=r(20),i=r.n(u),c=(r(315),r(89)),d=r(597),m=r.n(d),b=r(26),f=r.n(b),p=r(0),w=r.n(p),_=r(598),N=r(618),h=r(52),v=r(34),g=r(657),x="/data00/webprojectdev/hids_open/src/pages/user/edit-password-modal/index.tsx",E=Object(_.a)(c.a)(t||(t=m()(["\n  /* .arco-form-label-item > label {\n    padding-left: 4px !important;\n  } */\n"]))),j={old_password:"",password:"",re_password:""};a.default=function(e){var a=e.visible,r=e.data,t=e.handleCancel,l=c.a.useForm(),u=i()(l,1)[0],d=Object(p.useState)(1),m=i()(d,2),b=m[0],_=m[1];Object(p.useEffect)((function(){a&&(u.setFieldsValue(j),_(1))}),[a]);var O=function(){var e=o()(f.a.mark((function e(){var a,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.validate();case 2:if(a=e.sent,1!==b){e.next=10;break}return e.next=6,Object(h.CheckUserPassword)({data:{username:r.username,password:a.old_password}});case 6:null!=(t=e.sent)&&t.data.if_check?_(2):u.setFields({old_password:{value:a.old_password,error:{message:"密码错误"}}}),e.next=16;break;case 10:return e.next=12,Object(h.UpdateUserPassword)({data:{username:r.username,password:a.password}});case 12:Object(v.b)(),Object(v.e)(),s.a.success("修改密码成功，请重新登录"),setTimeout((function(){location.href="/user/login"}),1e3);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return w.a.createElement(N.b,{visible:a,onCancel:t,onOk:O,style:{width:520},title:"编辑密码",__source:{fileName:x,lineNumber:81,columnNumber:5}},w.a.createElement(E,{initialValues:j,form:u,colon:!1,labelAlign:"right",labelCol:{span:4},wrapperCol:{span:20},__source:{fileName:x,lineNumber:88,columnNumber:7}},1===b&&w.a.createElement(c.a.Item,{field:"old_password",label:"原密码",rules:[{required:!0,message:"请确认密码"},{validator:g.b}],__source:{fileName:x,lineNumber:101,columnNumber:11}},w.a.createElement(n.a.Password,{style:{width:"300px"},placeholder:"请再次输入密码",__source:{fileName:x,lineNumber:114,columnNumber:13}})),2===b&&w.a.createElement(w.a.Fragment,null,w.a.createElement(c.a.Item,{field:"password",label:"密码",rules:[{required:!0,message:"请输入密码"},{validator:g.b}],__source:{fileName:x,lineNumber:119,columnNumber:13}},w.a.createElement(n.a.Password,{style:{width:"300px"},placeholder:"密码需包含大小写英文、数字，不少于8个字符",__source:{fileName:x,lineNumber:132,columnNumber:15}})),w.a.createElement(c.a.Item,{field:"re_password",label:"确认密码",rules:[{required:!0,message:"请确认密码"},{validator:function(e,a){e!==u.getFieldValue("password")&&a("二次确认密码不正确")}}],__source:{fileName:x,lineNumber:137,columnNumber:13}},w.a.createElement(n.a.Password,{style:{width:"300px"},placeholder:"请再次输入密码",__source:{fileName:x,lineNumber:155,columnNumber:15}})))))}},618:function(e,a,r){"use strict";r.d(a,"a",(function(){return n}));var t,n,s=r(5),l=r.n(s),o=r(218),u=r.n(o),i=(r(587),r(588)),c=r(597),d=r.n(c),m=r(0),b=r.n(m),f=r(598),p=["children"],w=Object(f.a)(i.a)(t||(t=d()(["\n  .arco-modal-header .arco-modal-title {\n    text-align: left;\n  }\n"])));!function(e){e.add="add",e.edit="edit"}(n||(n={}));a.b=function(e){var a=e.children,r=u()(e,p);return b.a.createElement(w,l()({},r,{__source:{fileName:"/data00/webprojectdev/hids_open/src/components/common/modal/index.tsx",lineNumber:20,columnNumber:10}}),a)}},657:function(e,a,r){"use strict";r.d(a,"a",(function(){return t})),r.d(a,"b",(function(){return n}));var t=function(e,a){if(e)if(e.length<4&&a("用户名不少于4个字符"),e.length>16)a("用户名不超过16个字符");else{/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e)||a("仅支持英文、汉字、数字，不支持特殊字符")}},n=function(e,a){if(e)if(e.length<8)a("密码不少于8个字符");else if(e.length>30)a("密码不超过30个字符");else{/^[a-zA-Z0-9]+$/.test(e)||a("仅支持英文、数字，不支持特殊字符"),/[a-z]/.test(e)&&/[A-Z]/.test(e)&&/[0-9]/.test(e)||a("密码需包含大小写英文、数字")}};r(20),r(662)}}]);