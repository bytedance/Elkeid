(window.webpackJsonp=window.webpackJsonp||[]).push([[104,122,231,390,393,394],{1409:function(e,t,r){e.exports={container:"container-f613c819e1","count-box":"count-box-6a25883431"}},1440:function(e,t,r){e.exports={utils:"utils-a87b02fc67"}},1455:function(e,t,r){e.exports={utils:"utils-0abfa99ec7"}},1624:function(e,t,r){"use strict";r.d(t,"b",(function(){return v}));var n=r(50),a=r.n(n),c=r(10),i=r.n(c),u=r(75),o=r.n(u),l=r(51),s=r.n(l),m=r(0),b=r(794),d=r(163),f=r(606);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={number:function(e){return Number(String(e))},numberArray:function(e){return e?"string"==typeof e?[Number(e)]:Array.isArray(e)?e.map(Number):[]:[]},string:String,stringArray:function(e){return e?"string"==typeof e?[String(e)]:e:[]},boolean:function(e){if(!e)return!1;if(Array.isArray(e))return!0;return!["0","false","null","undefined"].includes(e)}};t.a=function(e){var t,r=e.initParams,n=e.namespace,c=void 0===n?"":n,u=e.visible,l=void 0===u||u,p=e.autoMergeUrlParams,N=void 0!==p&&p,_=Object(m.useContext)(f.a),O=_.addListener,j=_.removeListener,y=_.dispatchUrlParams,x=_.getCurrentUrlParams,h=_.setVisible,E=_.debugMode,P=Object(m.useRef)();if(!P.current){var w={},k={};P.current={},P.current.adapters=k,P.current.filterKeys=[],P.current.namespace=c,Object.keys(r).forEach((function(e){var t=r[e];Array.isArray(t)?(w[e]=t,k[e]=v.stringArray):"object"===o()(t)?(w[e]=t.value,"string"==typeof t.adapter?k[e]=v[t.adapter]:k[e]=t.adapter,t.isFilter&&P.current.filterKeys.push(e),t.isSorter&&(P.current.sorterKey=e,k[e]=v.string),t.isPageSize&&(P.current.pageSizeKey=e,k[e]=v.number),t.isCurrent&&(P.current.currentKey=e,k[e]=v.number)):(w[e]=t,void 0===t?k[e]=v.string:v[o()(t)]?k[e]=v[o()(t)]:Array.isArray(t)&&(0===t.length?k[e]=v.stringArray:"number"==typeof t[0]?k[e]=v.numberArray:k[e]=v.stringArray))})),t=g(g({},w),x(c)),E&&console.log("合成初始参数",t)}var D=Object(m.useState)(t),S=a()(D,2),A=S[0],C=S[1];P.current.value=A,P.current.setValue=C,P.current.visible=l,Object(m.useEffect)((function(){var e=function(e){var t=P.current,r=t.value,n=t.setValue;if(function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];if(Array.isArray(t[a])){var c=e[a]?s()(e[a]).sort():[],i=s()(t[a]).sort();if(JSON.stringify(c)!==JSON.stringify(i))return!0}else if(t[a]!==e[a])return!0}return!1}(e,r)){var a=g({},r);Object.keys(a).forEach((function(e){""!==a[e]&&(Array.isArray(a[e])&&!a[e].length||(a[e]=void 0))})),n(g(g({},a),e))}};return O(e,null==l||l,c),function(){return j(e)}}),[]),Object(m.useEffect)((function(){y(A,c)}),[]),Object(m.useEffect)((function(){h(l,c)}),[l]);var I={};Object.keys(A).forEach((function(e){var t=P.current.adapters;I[e]=A[e]?t[e]?t[e](A[e]):v.string(A[e]):void 0}));var z={};[].concat(s()(P.current.filterKeys),[P.current.sorterKey,P.current.pageSizeKey,P.current.currentKey]).forEach((function(e){return z[e]=A[e]}));var T=function(e){var t=P.current.value,r="function"==typeof e?e(t):e;E&&console.log("开始更新",t);var n=g({},t),a=Object.keys(t),c=P.current.namespace;N||Object.keys(n).forEach((function(e){return n[e]=void 0})),Object.keys(r).forEach((function(e){a.includes(e)&&(n[e]=r[e])})),E&&console.log("更新结束",n),E&&console.log("差异",Object(d.difference)(Object.entries(n).map((function(e){return"".concat(e[0],":").concat(e[1])})),Object.entries(t).map((function(e){return"".concat(e[0],":").concat(e[1])})))),C(n),P.current.value=n,y(n,c)};return E&&console.log("".concat(P.current.namespace||"全局","参数"),I,P.current.adapters),{globalUrlParams:Object(b.a)(I),tableChangeDeps:Object(b.a)(z),setGlobalUrlParams:T,tablePropsProxy:function(e){var t=P.current.tableProps;P.current.tableProps=e;var r=P.current,n=r.filterKeys,a=r.sorterKey,c=r.pageSizeKey,u=r.currentKey,o=r.value;return null!=t&&t.loading&&o[u]&&+o[u]>1&&(void 0===e.data||null===e.data||"[]"===JSON.stringify(e.data))&&T((function(e){return g(g({},e),{},i()({},u,"1"))})),g(g({},e),{},{pagination:g(g({},e.pagination),{},{current:o[u]?+o[u]:1,pageSize:o[c]?+o[c]:10}),onChange:function(){for(var e,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];var s={},m={},b=r[0],d=b.pageSize,f=b.current,p=P.current.tableProps;a===r[1].field&&(m[a]=r[1].direction),n.forEach((function(e){return s[e]=r[2][e]}));var v=g(g((e={},i()(e,c,String(d)),i()(e,u,String(f)),e),s),m);E&&console.log("table触发的更新",r),T(g(g({},o),v)),p.onChange.apply(p,r)}})}}}},1625:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),function(e){e.virusAlarmSummary="vas",e.virusAlarmOverview="vao",e.virusAlarm="va",e.abnormalList="ab",e.alarmList="al",e.raspAlarmList="ral",e.threatresList="tl",e.vulnDetail="vd",e.alarmDrawer="alarmd",e.exposurePathDrawer="epd",e.kubeExposure="kb",e.hostExposure="hb",e.hostExposureDetailDrawer="hedd",e.eventSummaryDrawer="esd",e.eventListTabe="elt"}(n||(n={}));var a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return!!e})).join(":")}},1628:function(e,t,r){"use strict";r(1314);var n=r(810),a=r(1),c=r.n(a),i=r(10),u=r.n(i),o=r(2),l=r.n(o),s=r(0),m=r.n(s),b=["onChange","pagination"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.onChange,r=e.pagination,a=l()(e,b);return m.a.createElement(n.a,c()({onChange:function(e,r,n,a){"filter"===a.action||"sort"===a.action?t(f(f({},e),{},{current:1}),r,n,a):t(e,r,n,a)},border:!1,pagination:(null==r?void 0:r.total)>10&&f(f({},r),{},{sizeCanChange:!0,sizeOptions:[10,20,50,100]})},a,{__source:{fileName:"/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/common/table/index.tsx",lineNumber:6,columnNumber:5}}))}},1634:function(e,t,r){"use strict";r.r(t),r.d(t,"DescribeHostStatistics",(function(){return c})),r.d(t,"DescribeHosts",(function(){return i})),r.d(t,"ExportHosts",(function(){return u})),r.d(t,"DownloadFile",(function(){return o})),r.d(t,"DescribeTags",(function(){return l})),r.d(t,"AddTags",(function(){return s})),r.d(t,"DeleteTags",(function(){return m})),r.d(t,"UpdateTags",(function(){return b})),r.d(t,"DescribePlatforms",(function(){return d})),r.d(t,"DescribeIDCs",(function(){return f})),r.d(t,"PostApiV6AssetCenterEnableHostImportantProtect",(function(){return p})),r.d(t,"PostApiV6AssetCenterDisableHostImportantProtect",(function(){return g}));var n=r(54),a=r(12),c=function(){return Object(n.b)({method:"get",url:"/api/v6/asset-center/DescribeHostStatistics"},Object(a.g)("获取主机统计信息"))},i=function(e){var t=e.data,r=e.params;return Object(n.b)({method:"post",url:"/api/v6/asset-center/DescribeHosts",data:t,params:r},Object(a.g)("获取主机列表信息"))},u=function(e){var t=e.data;return Object(n.b)({method:"post",url:"/api/v6/asset-center/ExportHosts",data:t},Object(a.g)("导出主机信息"))},o=function(e){var t=e.params;return Object(n.b)({method:"get",url:"/api/v6/shared/Download/".concat(t.file_name),responseType:"blob"},Object(a.g)("下载文件"),!1,!1)},l=function(){return Object(n.b)({method:"get",url:"/api/v6/asset-center/DescribeTags"},Object(a.g)("获取标签信息"))},s=function(e){var t=e.data;return Object(n.b)({method:"post",url:"/api/v6/asset-center/AddTags",data:t},Object(a.g)("添加标签"),!0)},m=function(e){var t=e.data;return Object(n.b)({method:"post",url:"/api/v6/asset-center/DeleteTags",data:t},Object(a.g)("删除标签"),!0)},b=function(e){var t=e.data;return Object(n.b)({method:"post",url:"/api/v6/asset-center/UpdateTags",data:t},Object(a.g)("修改标签"),!0)},d=function(){return Object(n.b)({method:"get",url:"/api/v6/asset-center/DescribePlatform"},Object(a.g)("获取操作系统类型"))},f=function(){return Object(n.b)({method:"get",url:"/api/v6/asset-center/DescribeIDC"},Object(a.g)("获取数据中心类型"))};function p(e){return Object(n.b)({url:"/api/v6/asset-center/EnableHostImportantProtect",data:e,method:"POST"},Object(a.g)("开启主机重保模式"))}function g(e){return Object(n.b)({url:"/api/v6/asset-center/DisableHostImportantProtect",data:e,method:"POST"},Object(a.g)("关闭主机重保模式"))}},1716:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"e",(function(){return m})),r.d(t,"d",(function(){return b}));var n,a,c=r(10),i=r.n(c),u=r(54),o=r(12);function l(){return Object(u.b)({url:"/api/v6/exposure/ContainerStatistic",method:"GET"},Object(o.g)("获取容器集群风险统计信息"))}function s(e){return Object(u.b)({url:"/api/v6/exposure/GetExposurePath",params:e,method:"GET"},Object(o.g)("获取暴露路径图数据"))}!function(e){e.intranet="intranet",e.extranet="extranet"}(a||(a={}));var m=(n={},i()(n,a.intranet,Object(o.g)("私网暴露")),i()(n,a.extranet,Object(o.g)("公网暴露")),n);function b(e,t){return Object(u.b)({url:"/api/v6/exposure/GetContainerRiskList",params:e,data:t,method:"POST"},Object(o.g)("获取容器集群风险列表"))}},407:function(e,t,r){"use strict";r.r(t);var n=r(28),a=r.n(n),c=r(16),i=r.n(c),u=r(0),o=r.n(u),l=r(1292),s=r(115),m=r.n(s),b=r(1656),d=r(196),f=r(1745),p=r(1716),g=r(12),v=r(1409),N=r.n(v),_="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/exposure/overview/index.tsx",O=m.a.bind(N.a);t.default=function(e){var t=e.type,r=Object(l.a)(a()(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)();case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),{ready:"host"===t,auto:!0}),n=r.data,c=r.loading,u=r.error,s=Object(l.a)(a()(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)();case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),{ready:"kube"===t,auto:!0}),m=s.data,v=s.loading,N=s.error;return"host"===t?o.a.createElement(d.a,{loading:c,error:u,displayType:d.b.element,errorStyle:{margin:"2px 0"},__source:{fileName:_,lineNumber:37,columnNumber:7}},o.a.createElement("div",{className:O("container"),__source:{fileName:_,lineNumber:43,columnNumber:9}},o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:44,columnNumber:11}},o.a.createElement(b.a,{title:Object(g.g)("暴露资产数量"),count:null==n?void 0:n.host,__source:{fileName:_,lineNumber:45,columnNumber:13}})),o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:47,columnNumber:11}},o.a.createElement(b.a,{title:Object(g.g)("弱口令"),count:null==n?void 0:n.weak_password,__source:{fileName:_,lineNumber:48,columnNumber:13}})),o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:50,columnNumber:11}},o.a.createElement(b.a,{title:Object(g.g)("高可利用性漏洞"),count:null==n?void 0:n.high_available_vuln,__source:{fileName:_,lineNumber:51,columnNumber:13}})),o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:53,columnNumber:11}},o.a.createElement(b.a,{title:Object(g.g)("入侵检测告警"),count:null==n?void 0:n.alarm,__source:{fileName:_,lineNumber:54,columnNumber:13}})))):o.a.createElement(d.a,{loading:v,error:N,displayType:d.b.element,errorStyle:{margin:"2px 0"},__source:{fileName:_,lineNumber:61,columnNumber:5}},o.a.createElement("div",{className:O("container"),__source:{fileName:_,lineNumber:67,columnNumber:7}},o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:68,columnNumber:9}},o.a.createElement(b.a,{title:Object(g.g)("暴露资产数量"),count:null==m?void 0:m.agent_num,__source:{fileName:_,lineNumber:69,columnNumber:11}})),o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:71,columnNumber:9}},o.a.createElement(b.a,{title:Object(g.g)("公网暴露资产数"),count:null==m?void 0:m.public_num,description:Object(g.g)("集群的 Node、Workloads 暴露到了公网，任何人都可访问它们。（注：VPC 内的任意客户端也均可访问它们）"),__source:{fileName:_,lineNumber:72,columnNumber:11}})),o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:80,columnNumber:9}},o.a.createElement(b.a,{title:Object(g.g)("私网暴露资产数"),count:null==m?void 0:m.private_num,description:Object(g.g)("集群的 Workloads 仅暴露到了 VPC 私网，VPC 内的任意客户端均可访问它们。（注：集群的 Node 默认暴露在 VPC 私网内，因此不做统计和展示）"),__source:{fileName:_,lineNumber:81,columnNumber:11}})),o.a.createElement("div",{className:O("count-box"),__source:{fileName:_,lineNumber:89,columnNumber:9}},o.a.createElement(b.a,{title:Object(g.g)("关联 RBAC 权限的资产数"),count:null==m?void 0:m.rbac_num,description:Object(g.g)("Workloads 关联了非默认的服务账户，可能具有访问集群 API Server 的特权"),__source:{fileName:_,lineNumber:90,columnNumber:11}}))))}},424:function(e,t,r){"use strict";r.r(t);r(1294);var n=r(1295),a=r(50),c=r.n(a),i=r(28),u=r.n(i),o=r(16),l=r.n(o),s=r(0),m=r.n(s),b=r(1292),d=r(1722),f=r(437),p=r(1716),g=r(12),v="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/exposure/kube-exposure/exposure-detail-drawer/index.tsx";t.default=function(e){var t=e.exposureId,r=e.visible,a=void 0!==r&&r,i=e.onClose,o=Object(b.a)(u()(l.a.mark((function e(){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)({exposure_id:t});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),{refreshDeps:[t],ready:a,auto:!0,debounceInterval:300}).data,N=Object(s.useState)(!1),_=c()(N,2),O=_[0],j=_[1];return Object(s.useEffect)((function(){j(!1)}),[a]),m.a.createElement(n.a,{title:Object(g.g)("暴露面详情"),style:{width:O?"100%":560},bodyStyle:{padding:O?0:""},getPopupContainer:function(){return document.getElementById("content-root")},footer:null,visible:a,onCancel:i,__source:{fileName:v,lineNumber:31,columnNumber:5}},!O&&m.a.createElement(m.a.Fragment,null,m.a.createElement(d.a,{style:{padding:0},title:Object(g.g)("资产详情"),records:[{title:Object(g.g)("集群名称"),content:(null==o?void 0:o.container_name)||"-"},{title:Object(g.g)("区域名称"),content:(null==o?void 0:o.region)||"-"}],__source:{fileName:v,lineNumber:44,columnNumber:11}}),m.a.createElement(d.a,{style:{padding:0,paddingTop:20},title:Object(g.g)("风险信息"),records:[{title:Object(g.g)("描述"),content:(null==o?void 0:o.risk_description)||"-",col:24},{title:Object(g.g)("暴露路径"),content:""}],divider:!1,__source:{fileName:v,lineNumber:52,columnNumber:11}})),m.a.createElement(f.default,{isFullScreen:O,setIsFullScreen:j,edges:null==o?void 0:o.edge_list,nodes:null==o?void 0:o.node_list,__source:{fileName:v,lineNumber:64,columnNumber:7}}))}},447:function(e,t,r){"use strict";r.r(t);r(224);var n=r(97),a=(r(162),r(67)),c=(r(116),r(42)),i=r(1),u=r.n(i),o=(r(225),r(127)),l=(r(814),r(611)),s=r(2),m=r.n(s),b=r(28),d=r.n(b),f=r(16),p=r.n(f),g=r(0),v=r.n(g),N=r(1603),_=r(1412),O=r(599),j=r(115),y=r.n(j),x=r(1609),h=r(1614),E=r(1613),P=r(1760),w=r(594),k=r(407),D=r(446),S=r(1745),A=r(1620),C=r(12),I=r(1625),z=r(1624),T=r(1440),U=r.n(T),K="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/exposure/host-exposure/index.tsx",F=["current","page_size"],L=y.a.bind(U.a);t.default=function(e){var t=e.visible,r={visible:!1,id:void 0},i=Object(z.a)({initParams:r,namespace:I.a.hostExposureDetailDrawer,visible:t}),s=i.globalUrlParams,b=i.setGlobalUrlParams,f=[{text:Object(C.g)("主机名"),value:"hostname"},{text:Object(C.g)("主机ID"),value:"agent_id"},{text:Object(C.g)("主机IP"),value:"ip"},{text:Object(C.g)("暴露服务"),value:"exposure_service"}],g={current:{value:1,adapter:z.b.number,isCurrent:!0},page_size:{value:10,adapter:z.b.number,isPageSize:!0},hostname:void 0,agent_id:void 0,ip:void 0,exposure_service:void 0,exposure_by:{value:[],adapter:z.b.stringArray,isFilter:!0}},j=Object(z.a)({initParams:g,namespace:I.a.hostExposure,autoMergeUrlParams:!0,visible:t}),y=j.globalUrlParams,T=j.setGlobalUrlParams,U=j.tablePropsProxy,V=Object(O.a)(d()(p.a.mark((function e(){var t,r,n,a,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.current,r=y.page_size,n=m()(y,F),e.next=3,Object(S.e)({page:t,page_size:r},n);case 3:return a=e.sent,c=a.data,i=a.page_info,e.abrupt("return",{list:c,total:(null==i?void 0:i.total)||0});case 7:case"end":return e.stop()}}),e)}))),{auto:!0,refreshDeps:[y]}),H=V.tableProps,G=V.refresh,R=[{title:Object(C.g)("主机"),dataIndex:"hostname",render:function(e,t){return v.a.createElement("div",{__source:{fileName:K,lineNumber:103,columnNumber:11}},v.a.createElement(w.a,{style:{marginLeft:-8},target:"_blank",href:"/host-detail?agentId=".concat(null==t?void 0:t.agent_id,"&breadcrumbLinkFrom=").concat(Object(x.b)()),__source:{fileName:K,lineNumber:104,columnNumber:13}},e))}},{title:Object(C.g)("暴露方式"),dataIndex:"exposure_by",filters:[{text:Object(C.g)("公网暴露"),value:S.c.ip},{text:Object(C.g)("对外服务"),value:S.c.service}],filteredValue:y.exposure_by,render:function(e){return void 0===e||0===(null==e?void 0:e.length)?"-":v.a.createElement(o.a,{size:8,__source:{fileName:K,lineNumber:129,columnNumber:11}},null==e?void 0:e.map((function(e){return v.a.createElement(l.a,{key:e,__source:{fileName:K,lineNumber:131,columnNumber:15}},S.f[e])})))}},{title:Object(C.g)("暴露服务"),dataIndex:"exposure_service",render:function(e){return v.a.createElement(N.a,{list:e,__source:{fileName:K,lineNumber:141,columnNumber:16}})}},{title:Object(C.g)("暴露风险"),dataIndex:"risk",render:function(e,t){return v.a.createElement("div",{style:{display:"flex",flex:1,width:260},__source:{fileName:K,lineNumber:149,columnNumber:11}},v.a.createElement(P.a,{number:(null==t?void 0:t.risk.weak_password)||0,title:Object(C.g)("弱口令"),__source:{fileName:K,lineNumber:150,columnNumber:13}}),v.a.createElement(P.a,{number:(null==t?void 0:t.risk.high_available_vuln)||0,title:Object(C.g)("漏洞"),__source:{fileName:K,lineNumber:151,columnNumber:13}}),v.a.createElement(P.a,{number:(null==t?void 0:t.risk.alarm)||0,title:Object(C.g)("告警"),__source:{fileName:K,lineNumber:152,columnNumber:13}}))}},{title:Object(C.g)("操作"),dataIndex:"operation",render:function(e,t){return v.a.createElement(w.a,{onClick:function(){return b({visible:!0,id:t.agent_id})},__source:{fileName:K,lineNumber:162,columnNumber:11}},Object(C.g)("详情"))}}],J=Object(h.b)({}),M=u()({},J),B=M.selectedRowKeys,W=M.isSelectedAllFromFilter,q=W?{conditions:{agent_id:y.agent_id,hostname:y.hostname,ip:y.ip,exposure_service:y.exposure_service}}:{id_list:B},Q=!B.length&&!W;return v.a.createElement("div",{__source:{fileName:K,lineNumber:187,columnNumber:5}},v.a.createElement(k.default,{type:"host",__source:{fileName:K,lineNumber:188,columnNumber:7}}),v.a.createElement("div",{className:L("utils"),__source:{fileName:K,lineNumber:189,columnNumber:7}},v.a.createElement(a.a,{content:Object(C.g)("请先在下方选择告警信息后再批量导出"),trigger:"hover",disabled:!Q,__source:{fileName:K,lineNumber:190,columnNumber:9}},v.a.createElement(c.a,{disabled:Q,onClick:function(){Object(A.a)({url:"/api/v6/exposure/ExportHosts",data:q,notifyId:"exposure-hosts"})},__source:{fileName:K,lineNumber:195,columnNumber:11}},Object(C.g)("批量导出"))),v.a.createElement(E.a,{onRefresh:d()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:n.a.success(Object(C.g)("刷新成功"));case 3:case"end":return e.stop()}}),e)}))),__source:{fileName:K,lineNumber:208,columnNumber:9}})),v.a.createElement(_.a,{style:{margin:"16px 0"},options:f,value:y,onChange:function(e,t){return T(t)},__source:{fileName:K,lineNumber:215,columnNumber:7}}),v.a.createElement(h.a,u()({rowKey:"_id",columns:R},U(H),{rowSelection:M,__source:{fileName:K,lineNumber:221,columnNumber:7}})),v.a.createElement(D.default,{visible:s.visible,id:s.id,onClose:function(){return b({visible:!1})},__source:{fileName:K,lineNumber:227,columnNumber:7}}))}},448:function(e,t,r){"use strict";r.r(t);r(224);var n=r(97),a=(r(162),r(67)),c=(r(116),r(42)),i=r(1),u=r.n(i),o=(r(225),r(127)),l=(r(814),r(611)),s=r(10),m=r.n(s),b=r(2),d=r.n(b),f=r(28),p=r.n(f),g=r(16),v=r.n(g),N=r(0),_=r.n(N),O=r(1412),j=r(599),y=r(115),x=r.n(y),h=r(1609),E=r(1614),P=r(1616),w=r(1613),k=r(594),D=r(407),S=r(424),A=r(1716),C=r(1620),I=r(12),z=r(1625),T=r(1624),U=r(1455),K=r.n(U),F="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/exposure/kube-exposure/index.tsx",L=["current","page_size"],V=["current","page_size"];function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=x.a.bind(K.a);t.default=function(e){var t=e.visible,r={visible:!1,id:void 0},i=Object(T.a)({initParams:r,namespace:z.a.exposurePathDrawer,visible:t}),s=i.globalUrlParams,m=i.setGlobalUrlParams,b=[{text:Object(I.g)("集群名称"),value:"container_name"},{text:Object(I.g)("集群区域"),value:"region"},{text:Object(I.g)("类型"),value:"container_type"},{text:Object(I.g)("命名空间"),value:"namespace"},{text:Object(I.g)("名称"),value:"name"}],f={current:{value:1,adapter:T.b.number,isCurrent:!0},page_size:{value:10,adapter:T.b.number,isPageSize:!0},container_name:void 0,container_type:void 0,namespace:void 0,exposure_type:{value:[],adapter:function(e){return T.b.stringArray(e)},isFilter:!0},name:void 0,region:void 0,if_rbac:{value:[],adapter:T.b.stringArray,isFilter:!0}},g=Object(T.a)({initParams:f,namespace:z.a.kubeExposure,autoMergeUrlParams:!0,visible:t}),y=g.globalUrlParams,x=g.setGlobalUrlParams,U=g.tablePropsProxy,K=Object(j.a)(p()(v.a.mark((function e(){var t,r,n,a,c,i,u,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.current,a=y.page_size,c=d()(y,L),e.next=3,Object(A.d)({page:n,page_size:a},G(G({},c),{},{if_rbac:1===(null===(t=c.if_rbac)||void 0===t?void 0:t.length)?"1"===c.if_rbac[0]:void 0}));case 3:return i=e.sent,u=i.data,o=i.page_info,e.abrupt("return",{list:null!=u?u:[],total:null!==(r=null==o?void 0:o.total)&&void 0!==r?r:0});case 7:case"end":return e.stop()}}),e)}))),{auto:!0,debounceInterval:300,refreshDeps:[y]}),H=K.tableProps,J=K.refresh,M=[{title:Object(I.g)("容器集群"),dataIndex:"container_name",render:function(e,t){return _.a.createElement("div",{__source:{fileName:F,lineNumber:101,columnNumber:11}},_.a.createElement(k.a,{style:{marginLeft:-8},target:"_blank",href:"/kube-detail?clusterId=".concat(t.container_id,"&name=").concat(t.container_name,"&breadcrumbLinkFrom=").concat(Object(h.b)()),__source:{fileName:F,lineNumber:102,columnNumber:13}},e),void 0===t.region||void 0===e?"-":_.a.createElement(P.a,{content:t.region,__source:{fileName:F,lineNumber:116,columnNumber:15}}))}},{title:Object(I.g)("类型"),dataIndex:"container_type",render:function(e){return e?_.a.createElement(P.a,{content:e,__source:{fileName:F,lineNumber:126,columnNumber:29}}):"-"}},{title:Object(I.g)("命名空间"),dataIndex:"namespace",render:function(e){return e?_.a.createElement(P.a,{content:e,__source:{fileName:F,lineNumber:133,columnNumber:29}}):"-"}},{title:Object(I.g)("名称"),dataIndex:"name",render:function(e){return e?_.a.createElement(P.a,{content:e,__source:{fileName:F,lineNumber:140,columnNumber:29}}):"-"}},{title:Object(I.g)("暴露方式"),dataIndex:"exposure_type",filters:[{text:Object(I.g)("公网暴露"),value:A.c.extranet},{text:Object(I.g)("私网暴露"),value:A.c.intranet}],filteredValue:y.exposure_type,render:function(e){return void 0===e||0===(null==e?void 0:e.length)?"-":_.a.createElement(o.a,{size:8,__source:{fileName:F,lineNumber:155,columnNumber:11}},null==e?void 0:e.map((function(e){return _.a.createElement(l.a,{key:e,__source:{fileName:F,lineNumber:157,columnNumber:15}},A.e[e])})))}},{title:Object(I.g)("是否关联 RBAC 权限"),dataIndex:"if_rbac",filters:[{text:Object(I.g)("是"),value:"1"},{text:Object(I.g)("否"),value:"0"}],filteredValue:y.if_rbac,render:function(e){return void 0===e?"-":Object(I.g)(e?"是":"否")}},{title:Object(I.g)("操作"),dataIndex:"operation",render:function(e,t){return _.a.createElement(k.a,{onClick:function(){return m({visible:!0,id:t.exposure_id})},__source:{fileName:F,lineNumber:180,columnNumber:11}},Object(I.g)("详情"))}}],B=Object(E.b)({}),W=u()({},B),q=W.selectedRowKeys,Q=W.isSelectedAllFromFilter,X=Object(N.useMemo)((function(){var e;if(!Q)return{id_list:q};y.current,y.page_size;var t=d()(y,V);return{conditions:G(G({},t),{},{if_rbac:1===(null===(e=t.if_rbac)||void 0===e?void 0:e.length)?"1"===t.if_rbac[0]:void 0})}}),[y,q,Q]),Y=!q.length&&!Q;return _.a.createElement("div",{__source:{fileName:F,lineNumber:210,columnNumber:5}},_.a.createElement(D.default,{type:"kube",__source:{fileName:F,lineNumber:211,columnNumber:7}}),_.a.createElement("div",{className:R("utils"),__source:{fileName:F,lineNumber:212,columnNumber:7}},_.a.createElement(a.a,{content:Object(I.g)("请先在下方选择告警信息后再批量导出"),trigger:"hover",disabled:!Y,__source:{fileName:F,lineNumber:213,columnNumber:9}},_.a.createElement(c.a,{disabled:Y,onClick:function(){Object(C.a)({url:"/api/v6/exposure/ExportContainers",data:X,notifyId:"exposure-containers"})},__source:{fileName:F,lineNumber:218,columnNumber:11}},Object(I.g)("批量导出"))),_.a.createElement(w.a,{onRefresh:p()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:n.a.success(Object(I.g)("刷新成功"));case 3:case"end":return e.stop()}}),e)}))),__source:{fileName:F,lineNumber:231,columnNumber:9}})),_.a.createElement(O.a,{style:{margin:"16px 0"},options:b,value:y,onChange:function(e,t){return x(t)},__source:{fileName:F,lineNumber:239,columnNumber:7}}),_.a.createElement(E.a,u()({columns:M},U(H),{rowKey:"exposure_id",rowSelection:W,__source:{fileName:F,lineNumber:245,columnNumber:7}})),_.a.createElement(S.default,{exposureId:s.id,visible:s.visible,onClose:function(){return m((function(e){return G(G({},e),{},{visible:!1})}))},__source:{fileName:F,lineNumber:251,columnNumber:7}}))}},514:function(e,t,r){"use strict";r.r(t);r(1357);var n=r(1365),a=r(0),c=r.n(a),i=r(596),u=r(447),o=r(448),l=r(12),s=r(1624),m="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/exposure/index.tsx";t.default=function(){var e=Object(s.a)({initParams:{activeTab:{value:"host",adapter:function(e){return"host"===e?e:"kube"}}}}),t=e.globalUrlParams.activeTab,r=e.setGlobalUrlParams;return c.a.createElement(i.a,{title:Object(l.g)("暴露面概览"),__source:{fileName:m,lineNumber:23,columnNumber:5}},c.a.createElement(n.a,{headerPadding:!1,activeTab:t||"host",onChange:function(e){return r({activeTab:e})},style:{marginTop:16,overflow:"visible"},__source:{fileName:m,lineNumber:24,columnNumber:7}},c.a.createElement(n.a.TabPane,{key:"host",title:Object(l.g)("主机风险"),__source:{fileName:m,lineNumber:30,columnNumber:9}},c.a.createElement(u.default,{visible:"host"===t,__source:{fileName:m,lineNumber:31,columnNumber:11}})),c.a.createElement(n.a.TabPane,{key:"kube",title:Object(l.g)("容器集群风险"),__source:{fileName:m,lineNumber:33,columnNumber:9}},c.a.createElement(o.default,{visible:"kube"===t,__source:{fileName:m,lineNumber:34,columnNumber:11}}))))}}}]);