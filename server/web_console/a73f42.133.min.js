(window.webpackJsonp=window.webpackJsonp||[]).push([[133,293,314,315,381],{1438:function(e,t,n){e.exports={container:"container-bfa68d5f1b","spin-container":"spin-container-12cffeeac5",header:"header-c347768b7d","item-title":"item-title-2132b929c5","detect-container":"detect-container-4f4fec8173","no-detect":"no-detect-ab81b2e241","state-container":"state-container-e97a1741d5",divider:"divider-d0b8f26de9","result-container":"result-container-f7ad7e17f6","total-container":"total-container-7db0de924b",percent:"percent-37fd6cefae"}},1608:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),i=n(70),c=n.n(i),o="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/utils/get-display-time.tsx";function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var r=c.a.unix(e).format(t);if(n){var i=null==r?void 0:r.split(" ");return a.a.createElement(a.a.Fragment,null,null==i?void 0:i.map((function(e){return a.a.createElement("div",{key:e,__source:{fileName:o,lineNumber:12,columnNumber:13}},e)})))}return r}return"-"}},1617:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"r",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return m})),n.d(t,"j",(function(){return d})),n.d(t,"a",(function(){return s})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"q",(function(){return v})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return h})),n.d(t,"p",(function(){return O})),n.d(t,"k",(function(){return _})),n.d(t,"n",(function(){return j}));var r,a=n(54),i=n(12);!function(e){e.detecting="running",e.finished="finished",e.error="error"}(r||(r={}));var c,o=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupStatistics",params:t},Object(i.g)("获取策略组统计信息"))},u=function(){return Object(a.b)({method:"get",url:"/api/v6/baseline/GetGroupList"},Object(i.g)("获取策略组列表"))};!function(e){e.success="success",e.failure="failed"}(c||(c={}));var s,l=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/Detect",data:t},Object(i.g)("开始基线检查"),!1)},m=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupCheckStatus",params:t},Object(i.g)("策略组检测状态"))},d=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/DetectProgressDetail",data:t},Object(i.g)("基线检查进度详情"))};!function(e){e.All="",e.HasRisk="risk",e.NoRisk="unrisk"}(s||(s={}));var b,f=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineList",data:t,params:n},Object(i.g)("获取基线列表"))},p=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineDetailList",data:t,params:n},Object(i.g)("基线详情列表"))};!function(e){e.Fail="error",e.NoPass="failed",e.Pass="passed"}(b||(b={}));var N,g=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetCheckResList",data:t,params:n},Object(i.g)("检查结果列表"))},v=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetWhiteHostNum",data:t},Object(i.g)("获取白名单弹框主机数"))};!function(e){e[e.Part=0]="Part",e[e.All=1]="All"}(N||(N={}));var h=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/ChecklistWhiten",data:t},Object(i.g)("检查项加白"))},O=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetChecklistDetail",data:t},Object(i.g)("获取一个检查项详情"))};function _(e,t){return Object(a.b)({url:"/api/v6/baseline/GetBaselineCheckList",params:e,data:t,method:"POST"},Object(i.g)("获取基线对应检查项列表"))}function j(e,t){return Object(a.b)({url:"/api/v6/baseline/GetCheckHostList",params:e,data:t,method:"POST"},Object(i.g)("获取检查项影响主机列表"))}},1619:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,a,i=n(603),c=n.n(i),o=n(0),u=n.n(o),s=n(604),l=n(12),m="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/global/detecting-label/index.tsx",d=s.a.div(r||(r=c()(["\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg) rotateX(180deg);\n    }\n    50% {\n      transform: rotate(180deg) rotateX(180deg);\n    }\n    100% {\n      transform: rotate(360deg) rotateX(180deg);\n    }\n  }\n\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n  animation: spin 1.5s linear infinite;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin-right: 8px;\n  background: conic-gradient(\n    from 114.04deg at 50% 50%,\n    #165dff -3.75deg,\n    rgba(22, 93, 255, 0) 331.83deg,\n    #165dff 339.88deg,\n    #165dff 356.25deg,\n    rgba(22, 93, 255, 0) 691.83deg\n  );\n  &::before {\n    content: ' ';\n    height: 8px;\n    width: 8px;\n    border-radius: 50%;\n    background: #fff;\n  }\n  &::after {\n    content: ' ';\n    height: 2px;\n    width: 2px;\n    border-radius: 50%;\n    background: #165dff;\n  }\n"]))),b=s.a.div(a||(a=c()(["\n  display: inline-flex;\n  align-items: center;\n  font-size: 12px;\n  line-height: 20px;\n"])));t.b=function(e){var t=e.progress,n=e.label,r=void 0===n?Object(l.g)("检查中"):n,a=e.className,i=!!t||0===t;return u.a.createElement(b,{className:a,__source:{fileName:m,lineNumber:68,columnNumber:5}},u.a.createElement(d,{className:"arco-icon-loading",__source:{fileName:m,lineNumber:69,columnNumber:7}}),u.a.createElement("span",{__source:{fileName:m,lineNumber:70,columnNumber:7}},r),i&&u.a.createElement("span",{__source:{fileName:m,lineNumber:71,columnNumber:23}}," ",t,"%"))}},1665:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(51),a=n.n(r),i=n(10),c=n.n(i),o=n(50),u=n.n(o),s=n(2),l=n.n(s),m=n(0),d=n(1292),b=n(100),f=["refreshDeps"],p=["reset","run","params","isPolling","loading"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n=null!=t?t:{},r=n.refreshDeps,i=void 0===r?[]:r,c=l()(n,f),o=c.onSuccess,s=c.onError,N=Object(m.useRef)(!0),v=Object(m.useState)(!1),h=u()(v,2),O=h[0],_=h[1],j=function(){_(!0)},y=Object(d.a)((function(){return N.current&&(j(),N.current=!1),e.apply(void 0,arguments)}),g(g({},c),{},{refreshDeps:i,onSuccess:function(){O&&_(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==o||o.apply(void 0,t)},onError:function(){O&&_(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==s||s.apply(void 0,t)}})),D=y.reset,E=y.run,x=y.params,S=y.isPolling,k=y.loading,P=l()(y,p),w=function(){return j(),E.apply(void 0,arguments)};Object(b.a)((function(){j()}),a()(i));var C=Object(m.useCallback)((function(){j(),D()}),[D]);return g(g({},P),{},{isPolling:S,loading:S?O:k,reset:C,refresh:function(){return w.apply(void 0,a()(x))},run:w,params:x})}},1691:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(1),a=n.n(r),i=n(10),c=n.n(i),o=n(2),u=n.n(o),s=n(0),l=n.n(s),m="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/common/block-container.tsx",d=["children","title","className","style","titleStyle"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={padding:"16px 20px",backgroundColor:"#fff",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.1)",borderRadius:"2px",boxSizing:"border-box"},N={fontSize:16,fontWeight:500,lineHeight:"24px",color:"#1D2129",marginBottom:"16px"};function g(e){var t=e.children,n=e.title,r=e.className,i=e.style,c=e.titleStyle,o=u()(e,d);return l.a.createElement("div",a()({className:r,style:f(f({},p),i)},o,{__source:{fileName:m,lineNumber:38,columnNumber:5}}),l.a.createElement("div",{style:f(f({},N),c),__source:{fileName:m,lineNumber:43,columnNumber:7}},n),l.a.createElement("div",{__source:{fileName:m,lineNumber:44,columnNumber:7}},t))}},443:function(e,t,n){"use strict";n.r(t);n(200);var r=n(85),a=(n(1400),n(1399)),i=(n(1337),n(1338)),c=(n(162),n(67)),o=(n(116),n(42)),u=n(28),s=n.n(u),l=n(16),m=n.n(l),d=n(0),b=n.n(d),f=n(115),p=n.n(f),N=n(52),g=n(1691),v=n(196),h=n(1619),O=n(811),_=n(1617),j=n(1608),y=n(12),D=n(1665),E=n(145),x=n(1438),S=n.n(x),k="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/baseline-detect/overview-header/index.tsx",P=p.a.bind(S.a),w=b.a.forwardRef((function(e,t){var n=Object(N.f)(E.l),u=e.lastDetectTime,l=e.onProgressDetail,f=Object(d.useContext)(O.BaselineDetectCtx),p=f.policyGroupId,x=f.neverDetect,S=f.handleBaselineDetect,w=f.taskIsDetecting,C=f.progress,G=f.handleDetectSuccess,I=f.loadingPostBaselineDetect,T=f.loadingDetectCondition,B=f.baselineType,L=Object(O.useDetectingTransferFinish)().isTransferDetectStatus,R=Object(D.a)(s()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.e)({params:{group_id:p}});case 2:if(t=e.sent,n=t.data.status,!L({detectStatus:n,policyGroupId:p})){e.next=7;break}return e.next=7,G("overviewHeader");case 7:return e.abrupt("return",t.data);case 8:case"end":return e.stop()}}),e)}))),{ready:Number.isFinite(p),auto:!0,refreshDeps:[p],pollingInterval:O.POLLING_INTERVAL_TIME,onSuccess:function(e,t,n){var r=e.status;Object(O.isDetectingStatus)(r)||n()}}),F=R.data,H=R.refresh,z=R.run,A=R.loading,M=R.error,Y=null!=F?F:{},W=Y.host_num,X=void 0===W?0:W,q=Y.pass_rate,J=void 0===q?100:q,V=Y.checklist_num,U=void 0===V?0:V;return Object(d.useImperativeHandle)(t,(function(){return{refresh:H,reset:z}})),b.a.createElement(v.a,{error:M,errorStyle:{marginTop:6},displayType:v.b.element,spin:{className:P("spin-container")},__source:{fileName:k,lineNumber:100,columnNumber:5}},b.a.createElement(g.a,{title:Object(y.g)("基线概览"),className:P("container"),style:{color:"#000000"},titleStyle:{marginBottom:20},__source:{fileName:k,lineNumber:108,columnNumber:7}},b.a.createElement(r.a,{className:P("spin-container"),loading:A||T,__source:{fileName:k,lineNumber:114,columnNumber:9}},b.a.createElement("div",{className:P("header"),__source:{fileName:k,lineNumber:118,columnNumber:11}},b.a.createElement("div",{__source:{fileName:k,lineNumber:119,columnNumber:13}},b.a.createElement("div",{className:P("item-title"),__source:{fileName:k,lineNumber:120,columnNumber:15}},Object(y.g)("最近检查时间（每隔一日自动检查）")),b.a.createElement("div",{className:P("detect-container"),__source:{fileName:k,lineNumber:121,columnNumber:15}},x?b.a.createElement("span",{className:P("no-detect"),__source:{fileName:k,lineNumber:124,columnNumber:19}},Object(y.g)("暂未检查")):w?b.a.createElement(h.b,{progress:C,label:Object(y.g)("正在检查中"),className:P("state-container"),__source:{fileName:k,lineNumber:126,columnNumber:19}}):b.a.createElement("span",{className:P("state-container"),__source:{fileName:k,lineNumber:132,columnNumber:19}},Object(j.a)(u)),w&&!x?b.a.createElement(o.a,{type:"primary",onClick:l,__source:{fileName:k,lineNumber:136,columnNumber:19}},Object(y.g)("查看进度")):b.a.createElement(c.a,{disabled:n,content:Object(y.g)("当前用户无编辑权限"),__source:{fileName:k,lineNumber:140,columnNumber:19}},b.a.createElement(o.a,{disabled:!n,type:"primary",onClick:S,loading:I,__source:{fileName:k,lineNumber:141,columnNumber:21}},Object(y.g)("立即检查"))))),b.a.createElement(i.a,{type:"vertical",className:P("divider"),__source:{fileName:k,lineNumber:153,columnNumber:13}}),b.a.createElement("div",{className:P("result-container"),__source:{fileName:k,lineNumber:154,columnNumber:13}},b.a.createElement("div",{className:P("total-container"),__source:{fileName:k,lineNumber:155,columnNumber:15}},b.a.createElement("span",{__source:{fileName:k,lineNumber:156,columnNumber:17}},Object(y.g)("最近检查通过率")),b.a.createElement(v.c,{__source:{fileName:k,lineNumber:157,columnNumber:17}},x?b.a.createElement("span",{__source:{fileName:k,lineNumber:159,columnNumber:21}},"-"):b.a.createElement(a.a,{value:J,suffix:"%",countUp:!0,countFrom:100,__source:{fileName:k,lineNumber:161,columnNumber:21}}))),b.a.createElement("div",{className:P("total-container"),__source:{fileName:k,lineNumber:165,columnNumber:15}},b.a.createElement("span",{__source:{fileName:k,lineNumber:166,columnNumber:17}},Object(y.g)("kube"===B?"检查节点数":"检查主机数")),b.a.createElement("span",{__source:{fileName:k,lineNumber:167,columnNumber:17}},b.a.createElement(v.c,{__source:{fileName:k,lineNumber:168,columnNumber:19}},X))),b.a.createElement("div",{className:P("total-container"),__source:{fileName:k,lineNumber:171,columnNumber:15}},b.a.createElement("span",{__source:{fileName:k,lineNumber:172,columnNumber:17}},Object(y.g)("检查项")),b.a.createElement("span",{__source:{fileName:k,lineNumber:173,columnNumber:17}},b.a.createElement(v.c,{__source:{fileName:k,lineNumber:174,columnNumber:19}},U))))))))}));t.default=w},811:function(e,t,n){"use strict";n.r(t),n.d(t,"BaselineDetectCtx",(function(){return o})),n.d(t,"BaselineDetectDetailCtx",(function(){return u})),n.d(t,"useDetectingTransferFinish",(function(){return s})),n.d(t,"isDetectingStatus",(function(){return l})),n.d(t,"isFinishDetectStatus",(function(){return m})),n.d(t,"isTransferDetectFinish",(function(){return d})),n.d(t,"POLLING_INTERVAL_TIME",(function(){return b}));var r=n(0),a=n.n(r),i=n(163),c=n(1617),o=a.a.createContext({policyGroupId:0,policyDetectStatus:c.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1,baselineType:void 0}),u=a.a.createContext({policyGroupId:0,policyDetectStatus:c.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1,instanceId:void 0,baselineId:void 0,baselineType:void 0});function s(){var e=Object(r.useRef)();return{isTransferDetectStatus:function(t){var n,r=t.detectStatus,a=t.policyGroupId,c=null!==(n=e.current)&&void 0!==n?n:{},o=c.detectStatus,u=c.policyGroupId,s=d(r,o)&&Object(i.eq)(u,a);return e.current=t,s},preData:e}}function l(e){return e===c.b.detecting}function m(e){return e===c.b.finished}function d(e,t){return e===c.b.finished&&t===c.b.detecting}var b=1e4}}]);