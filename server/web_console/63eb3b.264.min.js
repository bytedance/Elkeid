(window.webpackJsonp=window.webpackJsonp||[]).push([[264,293,379],{1389:function(e,t,n){e.exports={container:"container-aa0585b142",progress:"progress-fd71fd143b","info-container":"info-container-c391510fee",header:"header-c6b968664d","title-container":"title-container-127a5aaf9a",title:"title-1e0748ed58","progress-span":"progress-span-1608d99c82","risk-span":"risk-span-f6f387ce1f","close-icon":"close-icon-f218c786f5","back-btn":"back-btn-4dec74fc69","risk-container":"risk-container-194bdfd318",left:"left-8b144abe85",right:"right-13618c396f",line:"line-ad1b43656f","detecting-container":"detecting-container-6db28a5f75",loading:"loading-bb27209d3f","fail-container":"fail-container-3ebcf8f48e",instance:"instance-e5b5caa79a",name:"name-6142ea86e3",reason:"reason-9cf3af5c4a"}},1617:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"r",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return s})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return N})),n.d(t,"p",(function(){return O})),n.d(t,"k",(function(){return j})),n.d(t,"n",(function(){return _}));var r,a=n(54),i=n(12);!function(e){e.detecting="running",e.finished="finished",e.error="error"}(r||(r={}));var c,o=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupStatistics",params:t},Object(i.g)("获取策略组统计信息"))},u=function(){return Object(a.b)({method:"get",url:"/api/v6/baseline/GetGroupList"},Object(i.g)("获取策略组列表"))};!function(e){e.success="success",e.failure="failed"}(c||(c={}));var s,l=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/Detect",data:t},Object(i.g)("开始基线检查"),!1)},d=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupCheckStatus",params:t},Object(i.g)("策略组检测状态"))},f=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/DetectProgressDetail",data:t},Object(i.g)("基线检查进度详情"))};!function(e){e.All="",e.HasRisk="risk",e.NoRisk="unrisk"}(s||(s={}));var m,b=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineList",data:t,params:n},Object(i.g)("获取基线列表"))},p=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineDetailList",data:t,params:n},Object(i.g)("基线详情列表"))};!function(e){e.Fail="error",e.NoPass="failed",e.Pass="passed"}(m||(m={}));var g,h=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetCheckResList",data:t,params:n},Object(i.g)("检查结果列表"))},v=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetWhiteHostNum",data:t},Object(i.g)("获取白名单弹框主机数"))};!function(e){e[e.Part=0]="Part",e[e.All=1]="All"}(g||(g={}));var N=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/ChecklistWhiten",data:t},Object(i.g)("检查项加白"))},O=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetChecklistDetail",data:t},Object(i.g)("获取一个检查项详情"))};function j(e,t){return Object(a.b)({url:"/api/v6/baseline/GetBaselineCheckList",params:e,data:t,method:"POST"},Object(i.g)("获取基线对应检查项列表"))}function _(e,t){return Object(a.b)({url:"/api/v6/baseline/GetCheckHostList",params:e,data:t,method:"POST"},Object(i.g)("获取检查项影响主机列表"))}},1619:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,a,i=n(603),c=n.n(i),o=n(0),u=n.n(o),s=n(604),l=n(12),d="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/global/detecting-label/index.tsx",f=s.a.div(r||(r=c()(["\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg) rotateX(180deg);\n    }\n    50% {\n      transform: rotate(180deg) rotateX(180deg);\n    }\n    100% {\n      transform: rotate(360deg) rotateX(180deg);\n    }\n  }\n\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n  animation: spin 1.5s linear infinite;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin-right: 8px;\n  background: conic-gradient(\n    from 114.04deg at 50% 50%,\n    #165dff -3.75deg,\n    rgba(22, 93, 255, 0) 331.83deg,\n    #165dff 339.88deg,\n    #165dff 356.25deg,\n    rgba(22, 93, 255, 0) 691.83deg\n  );\n  &::before {\n    content: ' ';\n    height: 8px;\n    width: 8px;\n    border-radius: 50%;\n    background: #fff;\n  }\n  &::after {\n    content: ' ';\n    height: 2px;\n    width: 2px;\n    border-radius: 50%;\n    background: #165dff;\n  }\n"]))),m=s.a.div(a||(a=c()(["\n  display: inline-flex;\n  align-items: center;\n  font-size: 12px;\n  line-height: 20px;\n"])));t.b=function(e){var t=e.progress,n=e.label,r=void 0===n?Object(l.g)("检查中"):n,a=e.className,i=!!t||0===t;return u.a.createElement(m,{className:a,__source:{fileName:d,lineNumber:68,columnNumber:5}},u.a.createElement(f,{className:"arco-icon-loading",__source:{fileName:d,lineNumber:69,columnNumber:7}}),u.a.createElement("span",{__source:{fileName:d,lineNumber:70,columnNumber:7}},r),i&&u.a.createElement("span",{__source:{fileName:d,lineNumber:71,columnNumber:23}}," ",t,"%"))}},1658:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(115),c=n.n(i),o=n(1668),u=n.n(o),s="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/global/space-info/index.tsx",l=c.a.bind(u.a);t.a=function(e){var t=e.data,n=e.className,r=e.leftClassName,i=e.rightClassName,c=e.lineClassName;return a.a.createElement("div",{className:l("container",n),__source:{fileName:s,lineNumber:24,columnNumber:5}},null==t?void 0:t.map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:l("left",r),__source:{fileName:s,lineNumber:27,columnNumber:11}},e.leftText),a.a.createElement("div",{className:l("line",c),__source:{fileName:s,lineNumber:28,columnNumber:11}}),a.a.createElement("div",{className:l("right",i),__source:{fileName:s,lineNumber:29,columnNumber:11}},e.rightText))})))}},1668:function(e,t,n){e.exports={container:"container-ca0f97fd12",left:"left-79ab8630e8",right:"right-965046d44e",line:"line-6914aab8f5"}},811:function(e,t,n){"use strict";n.r(t),n.d(t,"BaselineDetectCtx",(function(){return o})),n.d(t,"BaselineDetectDetailCtx",(function(){return u})),n.d(t,"useDetectingTransferFinish",(function(){return s})),n.d(t,"isDetectingStatus",(function(){return l})),n.d(t,"isFinishDetectStatus",(function(){return d})),n.d(t,"isTransferDetectFinish",(function(){return f})),n.d(t,"POLLING_INTERVAL_TIME",(function(){return m}));var r=n(0),a=n.n(r),i=n(163),c=n(1617),o=a.a.createContext({policyGroupId:0,policyDetectStatus:c.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1,baselineType:void 0}),u=a.a.createContext({policyGroupId:0,policyDetectStatus:c.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1,instanceId:void 0,baselineId:void 0,baselineType:void 0});function s(){var e=Object(r.useRef)();return{isTransferDetectStatus:function(t){var n,r=t.detectStatus,a=t.policyGroupId,c=null!==(n=e.current)&&void 0!==n?n:{},o=c.detectStatus,u=c.policyGroupId,s=f(r,o)&&Object(i.eq)(u,a);return e.current=t,s},preData:e}}function l(e){return e===c.b.detecting}function d(e){return e===c.b.finished}function f(e,t){return e===c.b.finished&&t===c.b.detecting}var m=1e4},876:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n.n(r),i=n(1329),c=n.n(i),o=n(51),u=n.n(o),s=n(50),l=n.n(s),d=n(0),f=n.n(d),m=n(799),b=n(1333),p=n(115),g=n.n(p),h=n(1332),v=n(1619),N=n(1658),O=n(811),j=n(12),_=n(1389),y=n.n(_),D="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/baseline-detect/detecting-overview/detecting-instance.tsx";function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=g.a.bind(y.a);t.default=function(e){var t=e.data,n=e.getData,r=null!=t?t:{},a=r.host_num,i=r.host_detail,o=null!=a?a:{},s=o.total,p=void 0===s?0:s,g=o.finished,_=void 0===g?0:g,y=(null!=i?i:{}).detecting_host,k=Object(d.useState)([]),P=l()(k,2),I=P[0],S=P[1],w=Object(d.useRef)([]);Object(d.useEffect)((function(){var e,t,n=I.length,r=n<10?30-n:20,a=w.current.slice(0,10).reduce((function(e,t){return e[t.name]=!0,e}),{}),i=(null!==(e=null==y||null===(t=y.filter((function(e){return!a[e]})))||void 0===t?void 0:t.slice(0,r))&&void 0!==e?e:[]).map((function(e){return{key:Object(h.a)(),name:e}}));S((function(e){var t=[].concat(u()(e.splice(0,10)),u()(i));return w.current=t,t}))}),[y]);Object(d.useEffect)((function(){var e=w.current.length||1,t=e<=10,r=parseInt("".concat(O.POLLING_INTERVAL_TIME/e)),a=setInterval((function(){S((function(e){e.length<1&&n();var t=c()(e),r=(t[0],t.slice(1));return w.current=r,r}))}),t?r:2e3);return function(){return clearInterval(a)}}),[y]);var G=Object(b.useTransition)(I.slice(0,10).map((function(e,t){var n=e.name;return{key:e.key,name:n,y:280-28*(10-t),height:28}})),{key:function(e){return e.key},from:{height:0,opacity:0},leave:{height:0,opacity:0},enter:function(e){return{y:e.y,height:e.height,opacity:1}},update:function(e){return{y:e.y,height:e.height}}}),T=[{leftText:f.a.createElement("div",{className:E("left"),__source:{fileName:D,lineNumber:123,columnNumber:9}},f.a.createElement(v.b,{label:"",className:E("loading"),__source:{fileName:D,lineNumber:124,columnNumber:11}}),f.a.createElement("span",{__source:{fileName:D,lineNumber:125,columnNumber:11}},Object(j.g)("主机扫描"))),rightText:f.a.createElement("div",{className:E("right"),__source:{fileName:D,lineNumber:129,columnNumber:9}},f.a.createElement("span",{__source:{fileName:D,lineNumber:130,columnNumber:11}},Object(j.g)("扫描中")),f.a.createElement("span",{__source:{fileName:D,lineNumber:131,columnNumber:11}},_,"/",p))}];return f.a.createElement("div",{className:E("detecting-container"),__source:{fileName:D,lineNumber:139,columnNumber:5}},f.a.createElement(N.a,{data:T,__source:{fileName:D,lineNumber:140,columnNumber:7}}),f.a.createElement("div",{style:{position:"relative",height:280,marginLeft:22,marginTop:12},__source:{fileName:D,lineNumber:141,columnNumber:7}},G((function(e,t,n,r){return f.a.createElement(b.animated.div,{style:x({paddingBottom:8,zIndex:10-r,position:"absolute",willChange:"transform, height, opacity"},e),key:t.key,__source:{fileName:D,lineNumber:150,columnNumber:11}},f.a.createElement(m.a,{__source:{fileName:D,lineNumber:160,columnNumber:13}},t.name))}))))}}}]);