(window.webpackJsonp=window.webpackJsonp||[]).push([[223,492],{1558:function(e,t,r){e.exports={info:"info-8b9954f762"}},533:function(e,t,r){"use strict";r.r(t);r(1296);var n=r(1297),c=(r(225),r(127)),a=(r(116),r(42)),u=(r(224),r(97)),o=r(10),i=r.n(o),l=r(28),m=r.n(l),s=r(50),b=r.n(s),f=r(16),N=r.n(f),p=r(0),_=r.n(p),O=r(1290),d=r(1292),g=r(115),j=r.n(g),v=r(1582),E=r.n(v),w=r(613),y=r(119),h=r(12),P=r(1558),k=r.n(P),x="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/user/bind-otp-modal/index.tsx";function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=j.a.bind(k.a);t.default=function(e){var t=e.onClose,r=e.onSuccess,o=e.visible,i=Object(p.useState)(1),l=b()(i,2),s=l[0],f=l[1],g=Object(p.useState)(""),j=b()(g,2),v=j[0],P=j[1];Object(p.useEffect)((function(){f(1),P("")}),[o]);var k=Object(d.a)(m()(N.a.mark((function e(){var t,r,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)();case 2:return t=e.sent,r=t.data,e.prev=4,e.next=7,E.a.toDataURL(null==r?void 0:r.otp_uri,{width:200});case 7:return n=e.sent,e.abrupt("return",S({qrcodeURL:n},r));case 11:e.prev=11,e.t0=e.catch(4);case 13:case"end":return e.stop()}}),e,null,[[4,11]])}))),{auto:!0}).data,C=function(){var e=m()(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.c)({otp_secret:null==k?void 0:k.otp_secret,otp:v});case 3:u.a.success(Object(h.g)("绑定成功")),r(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.a.warning(Object(h.g)("OTP 输入错误，请重新输入"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return _.a.createElement(w.b,{title:Object(h.g)("绑定OTP"),onCancel:t,footer:_.a.createElement("div",{__source:{fileName:x,lineNumber:58,columnNumber:9}},1===s&&_.a.createElement(c.a,{size:12,__source:{fileName:x,lineNumber:60,columnNumber:13}},_.a.createElement(a.a,{onClick:t,__source:{fileName:x,lineNumber:61,columnNumber:15}},Object(h.g)("取消")),_.a.createElement(a.a,{type:"primary",onClick:function(){return f(2)},__source:{fileName:x,lineNumber:62,columnNumber:15}},Object(h.g)("下一步"))),2===s&&_.a.createElement(c.a,{size:12,__source:{fileName:x,lineNumber:68,columnNumber:13}},_.a.createElement(a.a,{onClick:function(){return f(1)},__source:{fileName:x,lineNumber:69,columnNumber:15}},Object(h.g)("上一步")),_.a.createElement(a.a,{type:"primary",onClick:C,disabled:6!==v.length,__source:{fileName:x,lineNumber:70,columnNumber:15}},Object(h.g)("绑定")))),visible:o,__source:{fileName:x,lineNumber:54,columnNumber:5}},_.a.createElement("div",{style:{width:300,marginBottom:40,transform:"translateX(-50%)",marginLeft:"50%"},__source:{fileName:x,lineNumber:79,columnNumber:7}},_.a.createElement(n.a,{current:s,__source:{fileName:x,lineNumber:82,columnNumber:9}},_.a.createElement(n.a.Step,{title:Object(h.g)("步骤一"),__source:{fileName:x,lineNumber:83,columnNumber:11}}),_.a.createElement(n.a.Step,{title:Object(h.g)("步骤二"),__source:{fileName:x,lineNumber:84,columnNumber:11}}))),1===s&&_.a.createElement("div",{__source:{fileName:x,lineNumber:88,columnNumber:9}},_.a.createElement("div",{className:D("info"),__source:{fileName:x,lineNumber:89,columnNumber:11}},Object(h.g)("请使用 Google Authenticator、Microsoft Authenticartor 等支持 OTP 认证的应用扫描下方二维码")),_.a.createElement("img",{src:null==k?void 0:k.qrcodeURL,style:{width:100,marginLeft:"calc(50% - 50px)"},__source:{fileName:x,lineNumber:94,columnNumber:11}})),2===s&&_.a.createElement("div",{__source:{fileName:x,lineNumber:98,columnNumber:9}},_.a.createElement("div",{className:D("info"),__source:{fileName:x,lineNumber:99,columnNumber:11}},Object(h.g)("请输入 OTP 应用中当前的 6 位代码")),_.a.createElement(O.a,{style:{marginBottom:20},value:v,onChange:P,__source:{fileName:x,lineNumber:100,columnNumber:11}})))}}}]);