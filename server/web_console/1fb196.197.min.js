(window.webpackJsonp=window.webpackJsonp||[]).push([[197,367],{1512:function(e,t,r){e.exports={container:"container-a20d279ca5",title:"title-ee4776c98b"}},1748:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return s}));var n=r(12),a=function(e,t){if(e)if(e.length<4&&t(Object(n.g)("用户名不少于4个字符")),e.length>16)t(Object(n.g)("用户名不超过16个字符"));else{/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e)||t(Object(n.g)("仅支持英文、汉字、数字，不支持特殊字符"))}},c=function(e,t){if(e)if(e.length<8)t(Object(n.g)("密码不少于8个字符"));else if(e.length>30)t(Object(n.g)("密码不超过30个字符"));else{/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()+=-\?;,./{}|\":<>\[\]\\\' ~_`]).{8,30}/.test(e)||t(Object(n.g)("必须包含大小英文字母、数字和特殊字符"))}},l=r(50),u=r.n(l),i=r(1505),o=r.n(i),s=function(e,t){try{if(null!=e&&e.includes("/")){var r=e.split("/"),a=u()(r,2),c=a[0],l=a[1];if(!c)return void t(Object(n.g)("非法IP地址段"));if(!o.a.isV4Format(c)&&!o.a.isV6Format(c))return void t(Object(n.g)("非法IP地址段"));if(Number(l)<16||Number(l)>32)return void t(Object(n.g)("子网掩码仅支持16-32"))}else if(!o.a.isV4Format(e)&&!o.a.isV6Format(e))return void t(Object(n.g)("非法IP地址"))}catch(e){t(Object(n.g)("非法IP地址"))}}},538:function(e,t,r){"use strict";r.r(t);r(116);var n,a=r(42),c=(r(304),r(118)),l=(r(197),r(117)),u=(r(806),r(199)),i=(r(600),r(198)),o=(r(1394),r(1401)),s=(r(224),r(97)),m=r(10),b=r.n(m),f=r(28),g=r.n(f),p=r(50),d=r.n(p),N=r(16),O=r.n(N),j=r(0),_=r.n(j),v=r(229),h=r(1292),y=r(115),E=r.n(y),k=r(596),w=r(54),P=r(12);function x(e){return Object(w.b)({url:"/api/v6/config/backup/syslog/updateConfig",data:e,method:"POST"},Object(P.g)("配置外部syslog备份"))}!function(e){e.tcp="tcp",e.udp="udp"}(n||(n={}));var I=r(1748),C=r(1512),F=r.n(C),z="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/backup-syslog/index.tsx";function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=E.a.bind(F.a);t.default=function(){var e=Object(v.a)(),t=d()(e,1)[0],r=Object(j.useState)(!1),m=d()(r,2),b=m[0],f=m[1],p=Object(h.a)(g()(O.a.mark((function e(){var r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.b)({url:"/api/v6/config/backup/syslog/getConfig",method:"GET"},Object(P.g)("拉取syslog备份配置"));case 2:return r=e.sent,n=r.data,f(null==n?void 0:n.enable),t.setFieldsValue(n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),{auto:!0}),N=p.data,y=p.refresh;return _.a.createElement(k.a,{contentClassName:V("container"),title:Object(P.g)("外部 syslog 备份"),contentStyle:{paddingTop:20},__source:{fileName:z,lineNumber:36,columnNumber:5}},_.a.createElement("div",{__source:{fileName:z,lineNumber:41,columnNumber:7}},_.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:24},__source:{fileName:z,lineNumber:42,columnNumber:9}},Object(P.g)("服务状态"),_.a.createElement(o.a,{size:"small",checked:b,onChange:function(){var e=g()(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}f(!0),e.next=15;break;case 4:return e.prev=4,e.next=7,x(S(S({},N),{},{enable:t}));case 7:y(),s.a.success(Object(P.g)("关闭成功")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),s.a.error(Object(P.g)("关闭失败"));case 14:f(!1);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),style:{margin:"0 8px"},__source:{fileName:z,lineNumber:44,columnNumber:11}}))),b&&_.a.createElement(_.a.Fragment,null,_.a.createElement(u.a,{form:t,__source:{fileName:z,lineNumber:68,columnNumber:11}},_.a.createElement(u.a.Item,{label:Object(P.g)("协议"),field:"protocol",rules:[{required:!0,message:Object(P.g)("请选择协议")}],__source:{fileName:z,lineNumber:69,columnNumber:13}},_.a.createElement(i.a,{placeholder:Object(P.g)("请选择协议"),style:{width:300},__source:{fileName:z,lineNumber:74,columnNumber:15}},_.a.createElement(i.a.Option,{value:n.tcp,__source:{fileName:z,lineNumber:75,columnNumber:17}},"TCP"),_.a.createElement(i.a.Option,{value:n.udp,__source:{fileName:z,lineNumber:76,columnNumber:17}},"UDP"))),_.a.createElement(u.a.Item,{label:Object(P.g)("IP地址"),field:"ip",rules:[{required:!0,message:Object(P.g)("请输入IP地址")},{validator:I.a}],__source:{fileName:z,lineNumber:79,columnNumber:13}},_.a.createElement(l.a,{style:{width:300},placeholder:Object(P.g)("请输入IP地址"),__source:{fileName:z,lineNumber:87,columnNumber:15}})),_.a.createElement(u.a.Item,{label:Object(P.g)("端口"),field:"port",rules:[{required:!0,message:Object(P.g)("请输入端口")},{validator:function(e,t){if(e<1||e>65535)return t(Object(P.g)("请输入1~65535"))}}],__source:{fileName:z,lineNumber:89,columnNumber:13}},_.a.createElement(l.a,{style:{width:300},placeholder:Object(P.g)("请输入端口"),__source:{fileName:z,lineNumber:101,columnNumber:15}})),_.a.createElement(u.a.Item,{label:Object(P.g)("日志类型"),field:"type",required:!0,rules:[{validator:function(e,t){var r;if(!(e=Object.keys(e).filter((function(t){return e[t]})))||null===(r=e)||void 0===r||!r.length)return t(Object(P.g)("请选择日志类型"))}}],formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]}))},normalize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{operation_log:e.includes("operation_log")||!1,hids_log:e.includes("hids_log")||!1,rasp_log:e.includes("rasp_log")||!1,k8s_log:e.includes("k8s_log")||!1}},__source:{fileName:z,lineNumber:103,columnNumber:13}},_.a.createElement(c.a.Group,{__source:{fileName:z,lineNumber:127,columnNumber:15}},_.a.createElement(c.a,{value:"operation_log",__source:{fileName:z,lineNumber:128,columnNumber:17}},Object(P.g)("日志操作")),_.a.createElement(c.a,{value:"hids_log",__source:{fileName:z,lineNumber:129,columnNumber:17}},Object(P.g)("主机安全日志")),_.a.createElement(c.a,{value:"rasp_log",__source:{fileName:z,lineNumber:130,columnNumber:17}},Object(P.g)("运行时安全日志")),_.a.createElement(c.a,{value:"k8s_log",__source:{fileName:z,lineNumber:131,columnNumber:17}},Object(P.g)("容器集群安全日志"))))),_.a.createElement(a.a,{type:"primary",onClick:g()(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,t.validate();case 4:(r=e.sent).enable=b,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return");case 11:return e.next=13,x(S({},r));case 13:s.a.success(Object(P.g)("保存成功")),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),s.a.error(Object(P.g)("保存失败"));case 19:case"end":return e.stop()}}),e,null,[[0,16],[1,8]])}))),__source:{fileName:z,lineNumber:135,columnNumber:11}},Object(P.g)("保存"))))}}}]);