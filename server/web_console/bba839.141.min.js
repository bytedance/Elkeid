(window.webpackJsonp=window.webpackJsonp||[]).push([[141,305,314,315,361],{1368:function(e,n,t){e.exports={container:"container-30c1697848",detect:"detect-dafa4a291e"}},1608:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var r=t(0),a=t.n(r),i=t(70),c=t.n(i),o="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/utils/get-display-time.tsx";function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var r=c.a.unix(e).format(n);if(t){var i=null==r?void 0:r.split(" ");return a.a.createElement(a.a.Fragment,null,null==i?void 0:i.map((function(e){return a.a.createElement("div",{key:e,__source:{fileName:o,lineNumber:12,columnNumber:13}},e)})))}return r}return"-"}},1619:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var r,a,i=t(603),c=t.n(i),o=t(0),l=t.n(o),s=t(604),u=t(12),m="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/global/detecting-label/index.tsx",d=s.a.div(r||(r=c()(["\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg) rotateX(180deg);\n    }\n    50% {\n      transform: rotate(180deg) rotateX(180deg);\n    }\n    100% {\n      transform: rotate(360deg) rotateX(180deg);\n    }\n  }\n\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n  animation: spin 1.5s linear infinite;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin-right: 8px;\n  background: conic-gradient(\n    from 114.04deg at 50% 50%,\n    #165dff -3.75deg,\n    rgba(22, 93, 255, 0) 331.83deg,\n    #165dff 339.88deg,\n    #165dff 356.25deg,\n    rgba(22, 93, 255, 0) 691.83deg\n  );\n  &::before {\n    content: ' ';\n    height: 8px;\n    width: 8px;\n    border-radius: 50%;\n    background: #fff;\n  }\n  &::after {\n    content: ' ';\n    height: 2px;\n    width: 2px;\n    border-radius: 50%;\n    background: #165dff;\n  }\n"]))),p=s.a.div(a||(a=c()(["\n  display: inline-flex;\n  align-items: center;\n  font-size: 12px;\n  line-height: 20px;\n"])));n.b=function(e){var n=e.progress,t=e.label,r=void 0===t?Object(u.g)("检查中"):t,a=e.className,i=!!n||0===n;return l.a.createElement(p,{className:a,__source:{fileName:m,lineNumber:68,columnNumber:5}},l.a.createElement(d,{className:"arco-icon-loading",__source:{fileName:m,lineNumber:69,columnNumber:7}}),l.a.createElement("span",{__source:{fileName:m,lineNumber:70,columnNumber:7}},r),i&&l.a.createElement("span",{__source:{fileName:m,lineNumber:71,columnNumber:23}}," ",n,"%"))}},1620:function(e,n,t){"use strict";var r,a,i=t(1320),c=t(28),o=t.n(c),l=(t(809),t(607)),s=t(64),u=(t(602),t(146)),m=t(16),d=t.n(m),p=t(0),f=t.n(p),b=t(799),g=t(115),h=t.n(g),v=t(1319),N=t(594),_=t(54),O=t(1634),x=t(12),j=t(74);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var w,E=function(e){return f.a.createElement("svg",y({width:16,height:20,fill:"none"},e),f.a.createElement("mask",{id:"export-file_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:16,height:20},r||(r=f.a.createElement("path",{d:"M1.103 0h10.24c.146 0 .285.056.389.157l4.105 3.985c.104.101.163.24.163.384v14.393c0 .597-.494 1.081-1.103 1.081H1.103C.494 20 0 19.516 0 18.919V1.08C0 .484.494 0 1.103 0z",fill:"#fff"}))),a||(a=f.a.createElement("g",{mask:"url(#export-file_svg__a)"},f.a.createElement("path",{d:"M1.103 0h10.24c.146 0 .285.056.389.157l4.105 3.985c.104.101.163.24.163.384v14.393c0 .597-.494 1.081-1.103 1.081H1.103C.494 20 0 19.516 0 18.919V1.08C0 .484.494 0 1.103 0z",fill:"#1664FF"}),f.a.createElement("path",{fill:"#fff",d:"M4 6h8v1H4zM4 10h8v1H4zM4 14h6v1H4z"}),f.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.57 0h4.414v4.324h-3.31c-.61 0-1.104-.484-1.104-1.08V0z",fill:"#94BFFF"}))))},k=t(1635),D=t.n(k),S="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/utils/gen-sse-export/index.tsx",z=h.a.bind(D.a);!function(e){e.init="init",e.exporting="exporting",e.saving="saving",e.success="success",e.failed="failed"}(w||(w={}));n.a=function(e){var n=e.url,t=e.data,r=e.notifyId,a=void 0===r?"EXPORT_NOTIFY_ID":r,c=e.method,m=void 0===c?"POST":c,p=Object(j.a)(),g=new v.SSE("".concat(_.a).concat(n),{headers:{Token:p},method:m,payload:JSON.stringify(t)});g.addEventListener("open",(function(e){console.log("open",e)}),!1),g.addEventListener("progress",(function(e){console.log("progress",e);var n=JSON.parse(e.data)||{},t=null==n?void 0:n.data,r=t.export_total,c=t.export_count,m=t.status,p=t.file_name;if(m===w.init||m===w.exporting||m===w.saving){var h=Math.round(c/r*100);h>99&&(h=99),u.a.info({id:a,icon:f.a.createElement(s.a,{__source:{fileName:S,lineNumber:86,columnNumber:17}}),title:Object(x.g)("正在导出"),duration:9e5,content:f.a.createElement("div",{className:z("container"),__source:{fileName:S,lineNumber:90,columnNumber:13}},f.a.createElement(E,{style:{marginRight:"12px"},__source:{fileName:S,lineNumber:91,columnNumber:15}}),f.a.createElement(b.a,{showTooltip:{type:"tooltip",props:{triggerProps:{className:z("name")}}},__source:{fileName:S,lineNumber:92,columnNumber:15}},p),f.a.createElement(l.a,{percent:h,type:"circle",size:"mini",style:{width:"16px",height:"16px"},__source:{fileName:S,lineNumber:104,columnNumber:15}}))})}else m===w.success&&(u.a.success({id:a,title:Object(x.g)("导出成功"),duration:9e5,content:f.a.createElement("div",{className:z("container"),__source:{fileName:S,lineNumber:119,columnNumber:13}},f.a.createElement(E,{style:{marginRight:"12px"},__source:{fileName:S,lineNumber:120,columnNumber:15}}),f.a.createElement(b.a,{tooltip:!1,showTooltip:{type:"tooltip",props:{triggerProps:{className:z("name")}}},__source:{fileName:S,lineNumber:121,columnNumber:15}},p),f.a.createElement(N.a,{style:{marginRight:"-8px"},onClick:o()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.DownloadFile)({params:{file_name:p}});case 2:u.a.remove(a);case 3:case"end":return e.stop()}}),e)}))),icon:f.a.createElement(i.a,{__source:{fileName:S,lineNumber:144,columnNumber:23}}),__source:{fileName:S,lineNumber:134,columnNumber:15}},Object(x.g)("下载")))}),g.close())}),!1),g.addEventListener("error",(function(e){console.log("error",e),g.close()}),!1),g.stream()}},1635:function(e,n,t){e.exports={container:"container-89c01f30b7",name:"name-b0b73f3090"}},319:function(e,n,t){"use strict";t.r(n);t(225);var r=t(127),a=(t(1298),t(1299)),i=(t(116),t(42)),c=t(50),o=t.n(c),l=(t(224),t(97)),s=t(10),u=t.n(s),m=t(28),d=t.n(m),p=t(16),f=t.n(p),b=t(0),g=t.n(b),h=t(780),v=t(1595),N=t(1292),_=t(1599),O=t(115),x=t.n(O),j=t(163),y=t(164),w=t.n(y),E=t(1619),k=t(837),D=t(1631),S=t(1620),z=t(1608),F=t(12),P=t(1368),C=t.n(P),M="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/asset-fingerprint/fingerprint-head/index.tsx";function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=x.a.bind(C.a);n.default=function(e){var n=e.checkDetail,t=e.type,c=e.filter,s=e.onScanSuccess,u=e.isHostDetail,m=Object(k.useDisabledCollect)(u),p=null!=n?n:{},O=p.isSelectedAllFromFilter,x=p.selectedRowKeys,y=Object(N.a)(d()(f.a.mark((function e(){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.DescribeFingerprintRefreshStatus)({params:T({fingerprint_type:t},u?{agent_id:null===(n=w.a.parse(null===(r=location)||void 0===r?void 0:r.search))||void 0===n?void 0:n.agentId}:{})});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)}))),{pollingInterval:5e3,auto:!0,onSuccess:function(e,n,t){"running"!==e.status&&t()}}),P=y.data,C=y.refresh,R=null!=P?P:{},I=R.update_time,V=R.status,Y=R.percent,J=void 0===Y?0:Y,X=R.cooldown_time,L=void 0===X?0:X,U="running"===V,A=Object(b.useRef)(!1);Object(_.a)((function(){A.current&&(s(),l.a.success(Object(F.g)("采集成功"))),A.current=!0}),(function(e,n){return!("running"===e[0]&&"success"===n[0])}),[V]);var B=Object(N.a)(d()(f.a.mark((function e(){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.RefreshFingerprintData)({data:T({fingerprint_type:t},u?{agent_id:null===(n=w.a.parse(null===(r=location)||void 0===r?void 0:r.search))||void 0===n?void 0:n.agentId}:{})});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),{throwOnError:!0}).run,K=Object(b.useState)(!1),W=o()(K,2),q=W[0],G=W[1],Q=Object(b.useState)(!1),Z=o()(Q,2),$=Z[0],ee=Z[1],ne=function(){var e=d()(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.next=3,C();case 3:if(G(!1),"cooling"!==V){e.next=9;break}return n="".concat(L>=60?Object(F.g)("{placeholder0} 分钟",{placeholder0:Math.round(L/60)}):Object(F.g)("{cooldown_time} 秒",{cooldown_time:L})),l.a.warning("".concat(Object(F.g)("采集过于频繁，请 {timeText}后重试",{timeText:n}))),e.abrupt("return");case 9:"running"!==V&&ee(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:l.a.info(Object(F.g)("已开始采集")),ee(!1),C(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),re=!(O||!Object(j.isEmpty)(x));return g.a.createElement(h.a,{className:H("container"),__source:{fileName:M,lineNumber:148,columnNumber:5}},g.a.createElement(r.a,{size:12,__source:{fileName:M,lineNumber:149,columnNumber:7}},g.a.createElement(i.a,{disabled:re,onClick:function(){var e,n=O?{conditions:T(T({},c),u?{agent_id:null===w.a||void 0===w.a||null===(e=w.a.parse(location.search))||void 0===e?void 0:e.agentId}:{})}:{id_list:x};Object(S.a)({url:"/api/v6/asset-center/fingerprint/ExportData",data:T({fingerprint_type:t},n),notifyId:t})},__source:{fileName:M,lineNumber:150,columnNumber:9}},Object(F.g)("批量导出")),g.a.createElement(a.a,{title:"".concat(Object(F.g)("将对{placeholder1}主机资产进行采集，可能花费较长时间，采集时客户端组件资源占用会略高于静默状态，是否确定开始？",{placeholder1:u?Object(F.g)("本台"):Object(F.g)("所有")})),popupVisible:$,onVisibleChange:function(e){e||ee(e)},onOk:te,onCancel:function(){return ee(!1)},position:"bottom",__source:{fileName:M,lineNumber:153,columnNumber:9}},g.a.createElement(i.a,{onClick:ne,disabled:U||m,loading:q,loadingFixedWidth:!0,__source:{fileName:M,lineNumber:169,columnNumber:11}},Object(F.g)("采集最新数据"))),U?g.a.createElement(E.b,{label:Object(F.g)("正在采集中"),progress:u?void 0:J,className:H("detect"),__source:{fileName:M,lineNumber:179,columnNumber:11}}):g.a.createElement(v.a.Tip,{__source:{fileName:M,lineNumber:185,columnNumber:11}},Object(F.g)("最近更新时间：{placeholder1}",{placeholder1:Object(z.a)(I)}))))}},837:function(e,n,t){"use strict";t.r(n),t.d(n,"useDisabledCollect",(function(){return d}));var r=t(28),a=t.n(r),i=t(16),c=t.n(i),o=t(1292),l=t(164),s=t.n(l),u=t(1611),m=t(1709),d=function(e){return Object(o.a)(a()(c.a.mark((function n(){var t,r,a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,Object(m.DescribeHostDetail)({params:{agent_id:null===(t=s.a.parse(location.search))||void 0===t?void 0:t.agentId}});case 3:return r=n.sent,a=r.data,n.abrupt("return",(null==a?void 0:a.status)!==u.d.running);case 6:return n.abrupt("return",!1);case 7:case"end":return n.stop()}}),n)}))),{auto:!0}).data}}}]);