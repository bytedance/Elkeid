(window.webpackJsonp=window.webpackJsonp||[]).push([[160,386],{1439:function(e,n,a){e.exports={"add-white-modal":"add-white-modal-dbf5cd312e","host-name":"host-name-e2127d2514","link-tips":"link-tips-bc376d99d7","back-latency-tips":"back-latency-tips-30cac3f8a7","add-util":"add-util-9def112403",add:"add-4329814ed2","add-tips-one":"add-tips-one-e1f073958b","add-tips-two":"add-tips-two-f136741c6b","delete-icon-box":"delete-icon-box-ff6d8586a3","EnUS-form":"EnUS-form-42a19b9131","ZhCN-form":"ZhCN-form-09a76de799"}},1648:function(e,n,a){"use strict";var t,r,c=a(0),l=a.n(c);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}n.a=function(e){return l.a.createElement("svg",o({width:12,height:11,fill:"none"},e),t||(t=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 .667C4 .298 4.298 0 4.667 0h2c.368 0 .666.298.666.667v.166a.5.5 0 00.5.5H10.8c.187 0 .28 0 .351.037a.333.333 0 01.146.145c.036.072.036.165.036.352v.266c0 .187 0 .28-.036.352a.333.333 0 01-.146.145c-.071.037-.164.037-.351.037h-.3a.5.5 0 00-.5.5v6.5a.667.667 0 01-.667.666H2a.667.667 0 01-.667-.666v-6.5a.5.5 0 00-.5-.5h-.3c-.186 0-.28 0-.351-.037a.333.333 0 01-.146-.145C0 2.413 0 2.32 0 2.133v-.266c0-.187 0-.28.036-.352a.333.333 0 01.146-.145c.071-.037.165-.037.351-.037H3.5a.5.5 0 00.5-.5V.667zM3.667 5c0-.184.149-.333.333-.333h.667C4.85 4.667 5 4.816 5 5v2.667C5 7.85 4.85 8 4.667 8H4a.333.333 0 01-.333-.333V5zm2.666 0c0-.184.15-.333.334-.333h.666c.184 0 .334.149.334.333v2.667c0 .184-.15.333-.334.333h-.666a.333.333 0 01-.334-.333V5z",fill:"#4E5969"})),l.a.createElement("mask",{id:"trash-can_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:12,height:11},r||(r=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 .667C4 .298 4.298 0 4.667 0h2c.368 0 .666.298.666.667v.666H10.8c.187 0 .28 0 .351.037a.333.333 0 01.146.145c.036.072.036.165.036.352v.266c0 .187 0 .28-.036.352a.333.333 0 01-.146.145c-.071.037-.164.037-.351.037H10v7a.667.667 0 01-.667.666H2a.667.667 0 01-.667-.666v-7h-.8c-.186 0-.28 0-.351-.037a.333.333 0 01-.146-.145C0 2.413 0 2.32 0 2.133v-.266c0-.187 0-.28.036-.352a.333.333 0 01.146-.145c.071-.037.165-.037.351-.037H4V.667zM3.667 5c0-.184.149-.333.333-.333h.667C4.85 4.667 5 4.816 5 5v2.667C5 7.85 4.85 8 4.667 8H4a.333.333 0 01-.333-.333V5zm2.666 0c0-.184.15-.333.334-.333h.666c.184 0 .334.149.334.333v2.667c0 .184-.15.333-.334.333h-.666a.333.333 0 01-.334-.333V5z",fill:"#fff"}))))}},1649:function(e,n,a){"use strict";var t,r,c=a(0),l=a.n(c);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}n.a=function(e){return l.a.createElement("svg",o({width:12,height:12,fill:"none"},e),t||(t=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.333 1.466c0-.368.299-.666.667-.666h2c.368 0 .667.298.667.666v.167a.5.5 0 00.5.5h2.966c.187 0 .28 0 .352.036a.334.334 0 01.145.146c.037.071.037.165.037.351v.267c0 .187 0 .28-.037.351a.334.334 0 01-.145.146c-.072.036-.165.036-.352.036h-.3a.5.5 0 00-.5.5v6.5a.667.667 0 01-.666.667H2.333a.667.667 0 01-.666-.666v-6.5a.5.5 0 00-.5-.5h-.3c-.187 0-.28 0-.352-.037a.333.333 0 01-.145-.146c-.037-.07-.037-.164-.037-.35v-.268c0-.186 0-.28.037-.35a.333.333 0 01.145-.147c.072-.036.165-.036.352-.036h2.966a.5.5 0 00.5-.5v-.167zM4 5.8c0-.184.15-.334.333-.334H5c.184 0 .333.15.333.334v2.666c0 .185-.149.334-.333.334h-.667A.333.333 0 014 8.466V5.8zm2.667 0c0-.184.149-.334.333-.334h.667c.184 0 .333.15.333.334v2.666c0 .185-.15.334-.333.334H7a.333.333 0 01-.333-.334V5.8z",fill:"#C9CDD4"})),l.a.createElement("mask",{id:"trash-can-disabled_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:12,height:12},r||(r=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.333 1.466c0-.368.299-.666.667-.666h2c.368 0 .667.298.667.666v.667h3.466c.187 0 .28 0 .352.036a.334.334 0 01.145.146c.037.071.037.165.037.351v.267c0 .187 0 .28-.037.351a.334.334 0 01-.145.146c-.072.036-.165.036-.352.036h-.8v7a.667.667 0 01-.666.667H2.333a.667.667 0 01-.666-.666v-7h-.8c-.187 0-.28 0-.352-.037a.333.333 0 01-.145-.146c-.037-.07-.037-.164-.037-.35v-.268c0-.186 0-.28.037-.35a.333.333 0 01.145-.147c.072-.036.165-.036.352-.036h3.466v-.667zM4 5.8c0-.184.15-.334.333-.334H5c.184 0 .333.15.333.334v2.666c0 .185-.149.334-.333.334h-.667A.333.333 0 014 8.466V5.8zm2.667 0c0-.184.149-.334.333-.334h.667c.184 0 .333.15.333.334v2.666c0 .185-.15.334-.333.334H7a.333.333 0 01-.333-.334V5.8z",fill:"#fff"}))))}},1698:function(e,n,a){"use strict";a.r(n),a.d(n,"CompTypeEnum",(function(){return t})),a.d(n,"PlatformFamilyOptions",(function(){return u})),a.d(n,"MatchType",(function(){return i})),a.d(n,"MatchTypeOptions",(function(){return s})),a.d(n,"FieldType",(function(){return m})),a.d(n,"FieldTypeOptions",(function(){return b})),a.d(n,"ArchOptions",(function(){return d})),a.d(n,"DescribeComponentList",(function(){return p})),a.d(n,"DescribeComponent",(function(){return f})),a.d(n,"CreateComponent",(function(){return v})),a.d(n,"DescribeComponentVersionList",(function(){return h})),a.d(n,"PublishComponentVersion",(function(){return N})),a.d(n,"DescribeRecommendComponentVersion",(function(){return g})),a.d(n,"DescribePolicyList",(function(){return _})),a.d(n,"CreatePolicy",(function(){return O})),a.d(n,"DeletePolicy",(function(){return y})),a.d(n,"DescribeComponentCriteria",(function(){return j})),a.d(n,"DescribeComponentVersionCriteria",(function(){return C}));var t,r=a(50),c=a.n(r),l=a(54),o=a(12);!function(e){e.agent="agent",e.exec="exec",e.tar_gz="tar.gz"}(t||(t={}));var i,u=[{label:"RHEL",value:"rhel"},{label:"Debian",value:"debian"}];!function(e){e.IN="$in",e.Regex="$regex"}(i||(i={}));var m,s=[{label:Object(o.g)("包含于"),value:i.IN},{label:Object(o.g)("正则匹配"),value:i.Regex}];!function(e){e.AgentID="agent_id",e.Tag="tag",e.KernelVersion="kernel_version"}(m||(m={}));var b=[{label:Object(o.g)("AgentID"),value:m.AgentID},{label:Object(o.g)("标签"),value:m.Tag},{label:Object(o.g)("内核版本"),value:m.KernelVersion}],d=[{label:"x86-64",value:"x86_64"},{label:"AArch64",value:"aarch64"}],p=function(e){var n=e.params;return Object(l.b)({method:"post",url:"/api/v6/component/DescribeComponentList",params:n},Object(o.g)("获取组件列表"))},f=function(e){var n=e.params;return Object(l.b)({method:"get",url:"/api/v6/component/DescribeComponent",params:n},Object(o.g)("获取组件信息"))},v=function(e){var n=e.data;return Object(l.b)({method:"post",url:"/api/v6/component/CreateComponent",data:n},Object(o.g)("新建组件"),!0)},h=function(e){var n=e.params,a=e.data;return Object(l.b)({method:"post",url:"/api/v6/component/DescribeComponentVersionList",params:n,data:a},Object(o.g)("获取组件版本列表"))},N=function(e){var n,a=e.data,t={};return a&&(t["Content-Type"]="multipart/form-data",n=new FormData,Object.entries(a).forEach((function(e){var a=c()(e,2),t=a[0],r=a[1];n.append(t,r)}))),Object(l.b)({method:"post",url:"/api/v6/component/PublishComponentVersion",data:n,headers:t,timeout:12e4},Object(o.g)("发布组件版本"),!0)},g=function(e){var n=e.params;return Object(l.b)({method:"get",url:"/api/v6/component/DescribeRecommendComponentVersion",params:n},Object(o.g)("获取建议的组件版本"))},_=function(e){var n=e.params,a=e.data;return Object(l.b)({method:"post",url:"/api/v6/component/DescribePolicyList",params:n,data:a},Object(o.g)("获取策略列表"))},O=function(e){var n=e.data;return Object(l.b)({method:"post",url:"/api/v6/component/CreatePolicy",data:n},Object(o.g)("新建策略"))},y=function(e){var n=e.data;return Object(l.b)({method:"post",url:"/api/v6/component/DeletePolicy",data:n},Object(o.g)("删除策略"),!0,!0)},j=function(){return Object(l.b)({method:"get",url:"/api/v6/component/DescribeComponentCriteria"},Object(o.g)("获取组件类别"))},C=function(e){var n=e.params;return Object(l.b)({method:"get",url:"/api/v6/component/DescribeComponentVersionCriteria",params:n},Object(o.g)("获取组件版本列表"))}},445:function(e,n,a){"use strict";a.r(n);a(116);var t,r=a(42),c=a(168),l=(a(595),a(298)),o=(a(197),a(117)),i=(a(162),a(67)),u=(a(224),a(97)),m=a(28),s=a.n(m),b=a(50),d=a.n(b),p=(a(600),a(198)),f=(a(806),a(199)),v=a(603),h=a.n(v),N=a(16),g=a.n(N),_=a(0),O=a.n(_),y=a(799),j=a(115),C=a.n(j),E=a(604),w=a(613),k=a(1698),D=a(12),V=a(1648),x=a(1649),T=a(1439),z=a.n(T),H="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/comp-policy/comp-modal/index.tsx",P=C.a.bind(z.a),R=Object(E.a)(f.a)(t||(t=h()(["\n  .arco-form-label-item {\n    flex: unset;\n  }\n  .arco-form-item-wrapper {\n    flex: unset;\n  }\n"]))),I=p.a.Option;n.default=function(e){var n=e.visible,a=e.data,t=e.handleConfirm,m=e.handleCancel,b=Object(D.g)("新建策略"),v=f.a.useForm(),h=d()(v,1)[0],N=Object(_.useState)([]),j=d()(N,2),C=j[0],E=j[1],T=Object(_.useState)([]),z=d()(T,2),M=z[0],S=z[1],A=Object(_.useState)(""),F=d()(A,2),L=F[0],B=F[1];Object(_.useEffect)((function(){n?a&&h.setFieldsValue(a):h.resetFields()}),[n,a]);var q=function(){var e=s()(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.validate();case 2:return n=e.sent,e.next=5,Object(k.CreatePolicy)({data:n});case 5:t(),B("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O.a.createElement(w.b,{visible:n,onCancel:function(){B(""),m()},onOk:q,className:P("add-white-modal"),style:{width:D.d?720:620},title:b,__source:{fileName:H,lineNumber:65,columnNumber:5}},O.a.createElement(R,{form:h,colon:!1,labelAlign:"right",labelCol:D.d?{span:6}:{span:4},wrapperCol:D.d?{span:18}:{span:20},__source:{fileName:H,lineNumber:76,columnNumber:7}},O.a.createElement(f.a.Item,{label:Object(D.g)("组件名称"),rules:[{required:!0,message:Object(D.g)("请选择组件名称")}],__source:{fileName:H,lineNumber:83,columnNumber:9}},O.a.createElement(p.a,{placeholder:"Please select ...",showSearch:!0,labelInValue:!0,value:L,onChange:function(e){return B(e.value)},onVisibleChange:function(e){e&&Object(k.DescribeComponentCriteria)().then((function(e){E(e.data)})).catch((function(){u.a.error("unexcepted error")}))},__source:{fileName:H,lineNumber:92,columnNumber:11}},C.map((function(e){return O.a.createElement(I,{key:e.key,value:e.key,__source:{fileName:H,lineNumber:112,columnNumber:17}},e.value)})))),O.a.createElement(f.a.Item,{field:"component_version_id",label:Object(D.g)("组件版本"),rules:[{required:!0,message:Object(D.g)("请选择组件版本")}],__source:{fileName:H,lineNumber:119,columnNumber:9}},O.a.createElement(p.a,{placeholder:"Please select ...",showSearch:!0,onVisibleChange:function(e){e&&""!==L&&Object(k.DescribeComponentVersionCriteria)({params:{component_id:L}}).then((function(e){S(e.data)})).catch((function(){u.a.error("unexcepted error")}))},__source:{fileName:H,lineNumber:129,columnNumber:11}},M.map((function(e){return O.a.createElement(I,{key:e.key,value:e.key,__source:{fileName:H,lineNumber:146,columnNumber:17}},e.value)})))),O.a.createElement(f.a.Item,{label:O.a.createElement(i.a,{mini:!0,content:Object(D.g)("数组以无空格间隔的逗号分隔"),__source:{fileName:H,lineNumber:155,columnNumber:13}},Object(D.g)("屏蔽规则")),rules:[{required:!0,message:Object(D.g)("请输入")}],__source:{fileName:H,lineNumber:153,columnNumber:9}},O.a.createElement(f.a.List,{field:"rules",__source:{fileName:H,lineNumber:161,columnNumber:11}},(function(e,n){var a,t=n.add,u=n.remove;return O.a.createElement("div",{__source:{fileName:H,lineNumber:164,columnNumber:17}},e.map((function(n,a){return O.a.createElement(l.a.Row,{key:n.key,__source:{fileName:H,lineNumber:167,columnNumber:23}},O.a.createElement(f.a.Item,{field:"".concat(null==n?void 0:n.field,"['key']"),rules:[{required:!0,message:Object(D.g)("不能为空")}],style:{width:134,marginRight:8},validateTrigger:"onBlur",__source:{fileName:H,lineNumber:168,columnNumber:25}},O.a.createElement(p.a,{placeholder:Object(D.g)("请选择匹配字段"),__source:{fileName:H,lineNumber:179,columnNumber:27}},k.FieldTypeOptions.map((function(e){return O.a.createElement(I,{value:e.value,key:e.value,__source:{fileName:H,lineNumber:182,columnNumber:33}},O.a.createElement(y.a,{style:{whiteSpace:"pre-wrap",wordBreak:"break-all",display:"inline-block"},key:e.value,__source:{fileName:H,lineNumber:183,columnNumber:35}},e.label))})))),O.a.createElement(f.a.Item,{field:"".concat(null==n?void 0:n.field,"['operator']"),rules:[{required:!0,message:Object(D.g)("不能为空")}],style:{width:134,marginRight:8},validateTrigger:"onBlur",__source:{fileName:H,lineNumber:198,columnNumber:25}},O.a.createElement(p.a,{placeholder:Object(D.g)("请选择匹配方式"),__source:{fileName:H,lineNumber:209,columnNumber:27}},k.MatchTypeOptions.map((function(e){return O.a.createElement(I,{value:e.value,key:e.value,__source:{fileName:H,lineNumber:211,columnNumber:31}},O.a.createElement(y.a,{style:{whiteSpace:"pre-wrap",wordBreak:"break-all",display:"inline-block"},key:e.value,__source:{fileName:H,lineNumber:212,columnNumber:33}},e.label))})))),O.a.createElement(f.a.Item,{field:"".concat(null==n?void 0:n.field,"['value']"),rules:[{required:!0,message:Object(D.g)("不能为空")}],style:{width:168},validateTrigger:"onBlur",__source:{fileName:H,lineNumber:226,columnNumber:25}},O.a.createElement(o.a,{placeholder:Object(D.g)("请输入匹配内容"),__source:{fileName:H,lineNumber:237,columnNumber:27}})),O.a.createElement("span",{className:P("delete-icon-box"),__source:{fileName:H,lineNumber:239,columnNumber:25}},(null==e?void 0:e.length)>1?O.a.createElement(i.a,{content:Object(D.g)("删除规则"),getPopupContainer:function(){var e;return null===(e=document.getElementsByTagName("body"))||void 0===e?void 0:e[0]},__source:{fileName:H,lineNumber:241,columnNumber:29}},O.a.createElement(V.a,{style:{cursor:"pointer"},onClick:function(){u(a)},__source:{fileName:H,lineNumber:245,columnNumber:31}})):O.a.createElement(i.a,{content:Object(D.g)("至少保留1个规则"),getPopupContainer:function(){var e;return null===(e=document.getElementsByTagName("body"))||void 0===e?void 0:e[0]},__source:{fileName:H,lineNumber:253,columnNumber:29}},O.a.createElement(x.a,{style:{cursor:"not-allowed"},__source:{fileName:H,lineNumber:257,columnNumber:31}}))))})),(null==e?void 0:e.length)<5?O.a.createElement("div",{className:P("add-util"),__source:{fileName:H,lineNumber:270,columnNumber:21}},O.a.createElement("div",{className:P("add"),onClick:function(){t()},__source:{fileName:H,lineNumber:271,columnNumber:23}},O.a.createElement(r.a,{type:"primary",icon:O.a.createElement(c.a,{__source:{fileName:H,lineNumber:277,columnNumber:54}}),size:"mini",__source:{fileName:H,lineNumber:277,columnNumber:25}}),O.a.createElement("span",{className:P("add-tips-one"),__source:{fileName:H,lineNumber:278,columnNumber:25}},Object(D.g)("新增规则"))),O.a.createElement("span",{className:P("add-tips-two"),__source:{fileName:H,lineNumber:281,columnNumber:23}},Object(D.g)('还可新增{placeholder1}个规则,规则之间是"或"的关系',{placeholder1:5-(null!==(a=null==e?void 0:e.length)&&void 0!==a?a:0)}))):null)})))))}}}]);