(window.webpackJsonp=window.webpackJsonp||[]).push([[149,294,403],{1351:function(e,t,n){e.exports={container:"container-6ec88568ff","spin-container":"spin-container-26a8b1984b",header:"header-6b2c9e7de1","item-title":"item-title-13c3dbb2c1","detect-container":"detect-container-bb89a97e8a","no-detect":"no-detect-446af3f8c7","state-container":"state-container-00c6d739de",divider:"divider-cfd353abb0","result-container":"result-container-e4b2ac0572","total-container":"total-container-b5b89aa7eb",percent:"percent-80d85175e1"}},1617:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"r",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return b})),n.d(t,"j",(function(){return d})),n.d(t,"a",(function(){return s})),n.d(t,"m",(function(){return m})),n.d(t,"l",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"o",(function(){return O})),n.d(t,"q",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return h})),n.d(t,"p",(function(){return j})),n.d(t,"k",(function(){return N})),n.d(t,"n",(function(){return y}));var r,a=n(54),i=n(12);!function(e){e.detecting="running",e.finished="finished",e.error="error"}(r||(r={}));var c,o=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupStatistics",params:t},Object(i.g)("获取策略组统计信息"))},u=function(){return Object(a.b)({method:"get",url:"/api/v6/baseline/GetGroupList"},Object(i.g)("获取策略组列表"))};!function(e){e.success="success",e.failure="failed"}(c||(c={}));var s,l=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/Detect",data:t},Object(i.g)("开始基线检查"),!1)},b=function(e){var t=e.params;return Object(a.b)({method:"get",url:"/api/v6/baseline/GroupCheckStatus",params:t},Object(i.g)("策略组检测状态"))},d=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/DetectProgressDetail",data:t},Object(i.g)("基线检查进度详情"))};!function(e){e.All="",e.HasRisk="risk",e.NoRisk="unrisk"}(s||(s={}));var f,m=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineList",data:t,params:n},Object(i.g)("获取基线列表"))},p=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetBaselineDetailList",data:t,params:n},Object(i.g)("基线详情列表"))};!function(e){e.Fail="error",e.NoPass="failed",e.Pass="passed"}(f||(f={}));var v,O=function(e){var t=e.data,n=e.params;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetCheckResList",data:t,params:n},Object(i.g)("检查结果列表"))},g=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetWhiteHostNum",data:t},Object(i.g)("获取白名单弹框主机数"))};!function(e){e[e.Part=0]="Part",e[e.All=1]="All"}(v||(v={}));var h=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/ChecklistWhiten",data:t},Object(i.g)("检查项加白"))},j=function(e){var t=e.data;return Object(a.b)({method:"post",url:"/api/v6/baseline/GetChecklistDetail",data:t},Object(i.g)("获取一个检查项详情"))};function N(e,t){return Object(a.b)({url:"/api/v6/baseline/GetBaselineCheckList",params:e,data:t,method:"POST"},Object(i.g)("获取基线对应检查项列表"))}function y(e,t){return Object(a.b)({url:"/api/v6/baseline/GetCheckHostList",params:e,data:t,method:"POST"},Object(i.g)("获取检查项影响主机列表"))}},1665:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(51),a=n.n(r),i=n(10),c=n.n(i),o=n(50),u=n.n(o),s=n(2),l=n.n(s),b=n(0),d=n(1292),f=n(100),m=["refreshDeps"],p=["reset","run","params","isPolling","loading"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){var n=null!=t?t:{},r=n.refreshDeps,i=void 0===r?[]:r,c=l()(n,m),o=c.onSuccess,s=c.onError,v=Object(b.useRef)(!0),g=Object(b.useState)(!1),h=u()(g,2),j=h[0],N=h[1],y=function(){N(!0)},_=Object(d.a)((function(){return v.current&&(y(),v.current=!1),e.apply(void 0,arguments)}),O(O({},c),{},{refreshDeps:i,onSuccess:function(){j&&N(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==o||o.apply(void 0,t)},onError:function(){j&&N(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==s||s.apply(void 0,t)}})),D=_.reset,S=_.run,P=_.params,w=_.isPolling,E=_.loading,x=l()(_,p),k=function(){return y(),S.apply(void 0,arguments)};Object(f.a)((function(){y()}),a()(i));var G=Object(b.useCallback)((function(){y(),D()}),[D]);return O(O({},x),{},{isPolling:w,loading:w?j:E,reset:G,refresh:function(){return k.apply(void 0,a()(P))},run:k,params:P})}},1691:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(1),a=n.n(r),i=n(10),c=n.n(i),o=n(2),u=n.n(o),s=n(0),l=n.n(s),b="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/components/common/block-container.tsx",d=["children","title","className","style","titleStyle"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={padding:"16px 20px",backgroundColor:"#fff",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.1)",borderRadius:"2px",boxSizing:"border-box"},v={fontSize:16,fontWeight:500,lineHeight:"24px",color:"#1D2129",marginBottom:"16px"};function O(e){var t=e.children,n=e.title,r=e.className,i=e.style,c=e.titleStyle,o=u()(e,d);return l.a.createElement("div",a()({className:r,style:m(m({},p),i)},o,{__source:{fileName:b,lineNumber:38,columnNumber:5}}),l.a.createElement("div",{style:m(m({},v),c),__source:{fileName:b,lineNumber:43,columnNumber:7}},n),l.a.createElement("div",{__source:{fileName:b,lineNumber:44,columnNumber:7}},t))}},353:function(e,t,n){"use strict";n.r(t);n(200);var r=n(85),a=(n(1400),n(1399)),i=n(28),c=n.n(i),o=n(16),u=n.n(o),s=n(0),l=n.n(s),b=n(115),d=n.n(b),f=n(1691),m=n(196),p=n(812),v=n(1617),O=n(12),g=n(1665),h=n(1351),j=n.n(h),N="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/host-detail/baseline-list/baseline-detect/overview-header-single/index.tsx",y=d.a.bind(j.a),_=l.a.forwardRef((function(e,t){var n=e.agentId,i=Object(s.useContext)(p.BaselineDetectCtx),o=i.policyGroupId,b=i.handleDetectSuccess,d=i.loadingDetectCondition,h=Object(p.useDetectingTransferFinish)().isTransferDetectStatus,j=Object(g.a)(c()(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)({params:{group_id:o,agent_id:n||void 0}});case 2:if(t=e.sent,r=t.data.status,!h({detectStatus:r,policyGroupId:o})){e.next=7;break}return e.next=7,b("overviewHeader");case 7:return e.abrupt("return",t.data);case 8:case"end":return e.stop()}}),e)}))),{ready:Number.isFinite(o),auto:!0,refreshDeps:[o],pollingInterval:p.POLLING_INTERVAL_TIME,onSuccess:function(e,t,n){var r=e.status;Object(p.isDetectingStatus)(r)||n()}}),_=j.data,D=j.refresh,S=j.run,P=j.loading,w=j.error,E=null!=_?_:{},x=E.pass_rate,k=void 0===x?100:x,G=E.checklist_num,I=void 0===G?0:G;return Object(s.useImperativeHandle)(t,(function(){return{refresh:D,reset:S}})),l.a.createElement(f.a,{title:Object(O.g)("基线概览"),className:y("container"),style:{color:"#000000"},titleStyle:{marginBottom:20},__source:{fileName:N,lineNumber:84,columnNumber:7}},l.a.createElement(r.a,{className:y("spin-container"),loading:P||d,__source:{fileName:N,lineNumber:90,columnNumber:9}},l.a.createElement("div",{className:y("header"),__source:{fileName:N,lineNumber:94,columnNumber:11}},l.a.createElement("div",{className:y("result-container"),__source:{fileName:N,lineNumber:95,columnNumber:13}},l.a.createElement("div",{className:y("total-container"),__source:{fileName:N,lineNumber:96,columnNumber:15}},l.a.createElement("span",{__source:{fileName:N,lineNumber:97,columnNumber:17}},Object(O.g)("最近检查通过率")),l.a.createElement(m.c,{error:w,displayType:m.b.element,__source:{fileName:N,lineNumber:98,columnNumber:17}},0===k?l.a.createElement("span",{__source:{fileName:N,lineNumber:103,columnNumber:21}},"-"):l.a.createElement(a.a,{value:k,suffix:"%",countUp:!0,countFrom:100,__source:{fileName:N,lineNumber:105,columnNumber:21}}))),l.a.createElement("div",{className:y("total-container"),__source:{fileName:N,lineNumber:109,columnNumber:15}},l.a.createElement("span",{__source:{fileName:N,lineNumber:110,columnNumber:17}},Object(O.g)("检查项")),l.a.createElement("span",{__source:{fileName:N,lineNumber:111,columnNumber:17}},l.a.createElement(m.c,{error:w,displayType:m.b.element,__source:{fileName:N,lineNumber:112,columnNumber:19}},I)))))))}));t.default=_},812:function(e,t,n){"use strict";n.r(t),n.d(t,"BaselineDetectCtx",(function(){return o})),n.d(t,"useDetectingTransferFinish",(function(){return u})),n.d(t,"isDetectingStatus",(function(){return s})),n.d(t,"isFinishDetectStatus",(function(){return l})),n.d(t,"isTransferDetectFinish",(function(){return b})),n.d(t,"POLLING_INTERVAL_TIME",(function(){return d}));var r=n(0),a=n.n(r),i=n(163),c=n(1617),o=a.a.createContext({policyGroupId:0,policyDetectStatus:c.b.finished,loadingPostBaselineDetect:!1,neverDetect:!0,taskIsDetecting:!1,handleBaselineDetect:function(){},handleSomeDetect:function(){},handleDetectSuccess:function(){},progress:0,loadingDetectCondition:!1});function u(){var e=Object(r.useRef)();return{isTransferDetectStatus:function(t){var n,r=t.detectStatus,a=t.policyGroupId,c=null!==(n=e.current)&&void 0!==n?n:{},o=c.detectStatus,u=c.policyGroupId,s=b(r,o)&&Object(i.eq)(u,a);return e.current=t,s},preData:e}}function s(e){return e===c.b.detecting}function l(e){return e===c.b.finished}function b(e,t){return e===c.b.finished&&t===c.b.detecting}var d=1e4}}]);