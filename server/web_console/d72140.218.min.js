(window.webpackJsonp=window.webpackJsonp||[]).push([[218,443],{1538:function(e,t,n){e.exports={"notify-mgmt":"notify-mgmt-51935f2346"}},524:function(e,t,n){"use strict";n.r(t);n(1314);var r=n(810),a=n(1),c=n.n(a),i=(n(116),n(42)),u=(n(299),n(165)),o=(n(814),n(611)),l=(n(304),n(118)),m=n(51),s=n.n(m),b=(n(1298),n(1299)),p=(n(1394),n(1401)),f=(n(225),n(127)),d=n(10),N=n.n(d),_=(n(224),n(97)),g=n(28),y=n.n(g),v=n(50),O=n.n(v),h=n(1331),w=n.n(h),j=n(16),E=n.n(j),x=n(0),S=n.n(x),k=n(1598),C=n(1595),P=n(780),T=n(800),z=n(1594),L=n(115),D=n.n(L),I=n(163),J=n(489),A=n(857),F=n(1717),G=n(1682),K=n(12),R=n(1538),V=n.n(R),W="/opt/tiger/compile_path/src/code.byted.org/biz-platform/hids/src/pages/notify-mgmt/index.tsx";function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){N()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=D.a.bind(V.a),M=k.a.useTobTable;t.default=function(e){w()(e);var t=Object(x.useState)(!1),n=O()(t,2),a=n[0],m=n[1],d=Object(x.useState)(),N=O()(d,2),g=N[0],v=N[1],h=M(function(){var e=y()(E.a.mark((function e(t){var n,r,a,c,i,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.pageSize,i=t.current,e.next=3,Object(F.e)({params:{page:i,page_size:c}});case 3:return u=e.sent,e.abrupt("return",{list:null!==(n=u.data)&&void 0!==n?n:[],total:null!==(r=null===(a=u.page_info)||void 0===a?void 0:a.total)&&void 0!==r?r:0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=h.tableProps,k=h.refresh,L=Object(x.useState)(!1),D=O()(L,2),R=D[0],V=D[1],q=function(){var e=y()(E.a.mark((function e(t){var n,r,a=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.length>1&&void 0!==a[1]&&a[1])&&V(!0),e.prev=2,e.next=5,Object(F.m)({data:t});case 5:r=Object(A.isOpenStatus)(t.opt)?Object(K.g)("通知开启成功"):Object(K.g)("通知关闭成功"),_.a.success(r),k();case 8:return e.prev=8,n&&V(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=y()(E.a.mark((function e(t){var n,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],!Object(I.isEmpty)(t.notice_level_list)){e.next=4;break}return _.a.warning(Object(K.g)("请至少保留一个通知等级")),e.abrupt("return");case 4:return n&&V(!0),e.prev=5,e.next=8,Object(F.m)({data:t});case 8:_.a.success(Object(K.g)("更改成功")),k();case 10:return e.prev=10,n&&V(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[5,,10,13]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){m(!0),v({data:e?B({},e):void 0})},X=function(){var e=y()(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notice_id,e.next=3,Object(F.b)({data:{notice_id:n}});case 3:k(),_.a.success(Object(K.g)("删除成功"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=[{title:Object(K.g)("通知类型"),bodyCellStyle:{whiteSpace:"nowrap"},headerCellStyle:{whiteSpace:"nowrap"},render:function(e,t){var n=t.notice_type,r=t.notice_type_desc;return S.a.createElement(f.a,{direction:"vertical",size:4,__source:{fileName:W,lineNumber:129,columnNumber:11}},S.a.createElement(C.a,{__source:{fileName:W,lineNumber:130,columnNumber:13}},Object(A.convertNotifyTypeName)(n)),S.a.createElement(C.a.Label,{style:{whiteSpace:"pre",display:"block"},__source:{fileName:W,lineNumber:131,columnNumber:13}},r))}},{title:Object(K.g)("通知状态"),dataIndex:"status",headerCellStyle:{whiteSpace:"nowrap"},render:function(e,t){var n=t.status,r=t.notice_id,a=Object(A.isOpenStatus)(n);return a?S.a.createElement(b.a,{title:Object(K.g)("是否确定关闭通知？"),position:"tr",style:{width:266},onConfirm:y()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({notice_id:r,opt:Object(G.c)(F.j,n)});case 2:case"end":return e.stop()}}),e)}))),__source:{fileName:W,lineNumber:148,columnNumber:13}},S.a.createElement("div",{style:{display:"inline-block"},__source:{fileName:W,lineNumber:159,columnNumber:15}},S.a.createElement(p.a,{checked:a,size:"small",__source:{fileName:W,lineNumber:160,columnNumber:17}}))):S.a.createElement(p.a,{size:"small",checked:a,onChange:y()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({notice_id:r,opt:Object(G.c)(F.j,n)},!0);case 2:case"end":return e.stop()}}),e)}))),__source:{fileName:W,lineNumber:166,columnNumber:11}})}},{title:Object(K.g)("我关注的等级"),dataIndex:"notice_level_list",bodyCellStyle:{whiteSpace:"nowrap"},headerCellStyle:{whiteSpace:"nowrap",paddingLeft:4},render:function(e,t){var n=t.notice_level_list,r=t.notice_id,a=t.notice_type;if(Object(A.notifyTypeIsAuth)(a))return S.a.createElement(C.a.Tip,{style:{paddingLeft:4},__source:{fileName:W,lineNumber:191,columnNumber:18}},Object(K.g)("无需选择等级"));var c=function(e,t){var r=n.includes(e);return r&&t?n:r||t?r&&!t?n.filter((function(t){return t!==e})):!r&&t?[].concat(s()(n),[e]):n:n};return S.a.createElement(l.a.Group,{value:n,__source:{fileName:W,lineNumber:214,columnNumber:11}},A.notifyLevelOptions.map((function(e){var t=e.label,n=e.value;return S.a.createElement(l.a,{value:n,onChange:function(){var e=y()(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q({notice_id:r,notice_level_list:c(n,t)},!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),__source:{fileName:W,lineNumber:219,columnNumber:17}},t)})))}},{title:Object(K.g)("通知配置"),dataIndex:"notice_config_type",headerCellStyle:{whiteSpace:"nowrap",paddingLeft:4},bodyCellStyle:{whiteSpace:"nowrap"},render:function(e,t){var n=t.notice_config_abstract,r=t.notice_config_type;return S.a.createElement(P.a,{align:"center",__source:{fileName:W,lineNumber:248,columnNumber:11}},S.a.createElement(o.a,{style:{marginRight:8},__source:{fileName:W,lineNumber:249,columnNumber:13}},Object(A.getNotifyConfigTypeName)(r)),S.a.createElement(T.a,{maxWidth:200,__source:{fileName:W,lineNumber:250,columnNumber:13}},n))}},{title:Object(K.g)("操作"),headerCellStyle:{paddingLeft:4},width:120,render:function(e,t){return w()(t),S.a.createElement(f.a,{size:8,__source:{fileName:W,lineNumber:263,columnNumber:11}},S.a.createElement(u.a,{onClick:function(){return U(t)},__source:{fileName:W,lineNumber:264,columnNumber:13}},Object(K.g)("编辑")),S.a.createElement(b.a,{onConfirm:y()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:case"end":return e.stop()}}),e)}))),title:Object(K.g)("是否确定删除？"),position:"tr",style:{width:266},__source:{fileName:W,lineNumber:265,columnNumber:13}},S.a.createElement(u.a,{__source:{fileName:W,lineNumber:273,columnNumber:15}},Object(K.g)("删除"))))}}];return S.a.createElement("div",{className:"container",__source:{fileName:W,lineNumber:282,columnNumber:5}},S.a.createElement(z.a,{title:Object(K.g)("通知管理"),className:H("notify-mgmt"),__source:{fileName:W,lineNumber:283,columnNumber:7}},S.a.createElement("div",{__source:{fileName:W,lineNumber:284,columnNumber:9}},S.a.createElement(C.a.Label,{__source:{fileName:W,lineNumber:285,columnNumber:11}},Object(K.g)("通知设置通过"),A.configTypeDocs.map((function(e,t){var n=e.label,r=e.addr;return S.a.createElement(S.a.Fragment,null,S.a.createElement(u.a,{target:"_blank",href:r,__source:{fileName:W,lineNumber:289,columnNumber:17}},n),t===A.configTypeDocs.length-1?"":"、")})),Object(K.g)("的方式第一时间接收告警信息"))),S.a.createElement("div",{style:{margin:"16px 0"},__source:{fileName:W,lineNumber:298,columnNumber:9}},S.a.createElement(i.a,{type:"primary",onClick:function(){return U()},__source:{fileName:W,lineNumber:299,columnNumber:11}},Object(K.g)("新建通知"))),S.a.createElement(r.a,c()({rowKey:"notice_id"},j,{border:!1,loading:j.loading||R,columns:Y,__source:{fileName:W,lineNumber:303,columnNumber:9}}))),S.a.createElement(J.default,c()({visible:a,onVisibleChange:m,onSuccess:k},g,{__source:{fileName:W,lineNumber:311,columnNumber:7}})))}}}]);